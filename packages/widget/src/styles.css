/**
 * Shoprocket Widget Styles
 * Using Tailwind v4 with sr: prefix to avoid conflicts
 */

/* Define CSS layers for proper cascade control */
@layer shoprocket-reset, shoprocket-base, shoprocket-components;

/* Reset inherited CSS properties that can bleed from parent page */
@layer shoprocket-reset {

  :host {
    /* Reset all inherited properties */
    color: initial;
    font-family: initial;
    font-size: initial;
    font-style: initial;
    font-weight: initial;
    line-height: initial;
    text-align: initial;
    text-indent: initial;
    text-transform: initial;
    letter-spacing: initial;
    word-spacing: initial;
    white-space: initial;
    direction: initial;
    cursor: initial;
    list-style: initial;
    background: initial;
    border: initial;
    padding: initial;
    margin: initial;
    display: initial;
    position: initial;
    z-index: initial;
    opacity: initial;
    visibility: initial;
    pointer-events: initial;
    
    /* Prevent double-tap zoom on mobile for all Shoprocket elements */
    touch-action: manipulation;
  }
  
  /* Apply touch-action to all child elements to ensure consistent behavior */
  :host * {
    touch-action: manipulation;
  }
}


/* Import Tailwind into the components layer so it overrides the reset */
@layer shoprocket-components {
  @import "tailwindcss";
}

/* Tell Tailwind where to look for classes */
@source "./index.ts";

/* Test @theme directive for Shadow DOM */
@theme {
  /* Define a custom shadow that maps to shadow-* utilities */
  --shadow-card: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);

  /* Define a custom color that maps to color utilities */
  --card: #f3f4f6;
}

/*
 * Shoprocket Design System
 *
 * CUSTOMIZATION: Users can override these CSS variables:
 * 1. Inline styles: <shoprocket-catalog style="--primary: #ff0000;">
 * 2. CSS: shoprocket-catalog { --primary: #ff0000; }
 * 3. JavaScript: element.style.setProperty('--primary', '#ff0000')
 */
:host {
  /* Tailwind CSS reset variables - required for utilities to work in Shadow DOM */
  /* Transform */
  --tw-translate-x: 0;
  --tw-translate-y: 0;
  --tw-rotate: 0;
  --tw-skew-x: 0;
  --tw-skew-y: 0;
  --tw-scale-x: 1;
  --tw-scale-y: 1;

  /* Shadows - neutralize Tailwind's extras so shadow-[â€¦] can resolve */
   --tw-inset-shadow: 0 0 #0000;
   --tw-inset-ring-shadow: 0 0 #0000;
   --tw-ring-offset-shadow: 0 0 #0000;
   --tw-ring-shadow: 0 0 #0000;

  --tw-ring-inset: ;
  --tw-ring-offset-width: 0px;
  --tw-ring-offset-color: #fff;
  --tw-ring-color: rgb(59 130 246 / 0.5);

  /* Blur/Filters */
  --tw-blur: ;
  --tw-brightness: ;
  --tw-contrast: ;
  --tw-grayscale: ;
  --tw-hue-rotate: ;
  --tw-invert: ;
  --tw-saturate: ;
  --tw-sepia: ;
  --tw-drop-shadow: ;

  /* Backdrop filters */
  --tw-backdrop-blur: ;
  --tw-backdrop-brightness: ;
  --tw-backdrop-contrast: ;
  --tw-backdrop-grayscale: ;
  --tw-backdrop-hue-rotate: ;
  --tw-backdrop-invert: ;
  --tw-backdrop-opacity: ;
  --tw-backdrop-saturate: ;
  --tw-backdrop-sepia: ;

  /* Borders */
  --tw-border-style: solid;
  --tw-border-spacing-x: 0;
  --tw-border-spacing-y: 0;

  /* =====================================================
   * STRUCTURAL VARIABLES - Non-Color Settings
   * These don't change between light/dark modes
   * ===================================================== */

  /* Spacing - Tailwind v4 uses its own spacing scale internally */
  /* We only define custom spacing for non-Tailwind use cases */
  --spacing: 0.25rem; /* Base unit: 4px - matches Tailwind default */

  /* Border radius - ONE value for consistency across all elements */
  /* Radius uses theme variable --radius (from shadcn standard) */

  /* Shadow - Theme provides individual variables, we combine them like Tailwind does */
  /* Themes define: --shadow-color, --shadow-opacity, --shadow-offset-x, --shadow-offset-y, --shadow-blur, --shadow-spread */
  --tw-shadow: var(--shadow-offset-x, 0px) var(--shadow-offset-y, 0px) var(--shadow-blur, 0px) var(--shadow-spread, 0px) color-mix(in srgb, var(--shadow-color, transparent) calc(var(--shadow-opacity, 0) * 100%), transparent);

  /* Skeleton shimmer duration (gradient changes per mode) */
  --skeleton-shimmer-duration: 2.5s;

  /* Grid columns */
  --cols: 4;
  --cols-md: 3;
  --cols-sm: 2;

  /* Component-specific */
  --cart-size: 64px;
  --cart-size-sm: 48px;
  --cart-panel-width: 400px;

  /* Component-specific variables (actual values, not passthroughs) */
  --sr-card-padding: 0;
  --sr-product-grid-padding: 1rem;
  --sr-product-image-radius: 0; /* Top corners handled by card */
  --sr-product-image-aspect-ratio: 3/4; /* Default aspect ratio, can be overridden */
  --sr-product-title-size: 0.875rem; /* text-sm */
  --sr-product-price-size: 0.875rem;
  --sr-product-section-gap: 0.5rem;
  --sr-button-padding-x: 1rem;
  --sr-button-padding-y: 0.5rem;
  --sr-button-font-size: 0.875rem;
  --sr-button-primary-opacity-hover: 0.9;
}

/* Embeddable widget spacing - adds breathing room between stacked embeds */
/* Cart excluded as it's position: fixed */
:host(shoprocket-catalog),
:host(shoprocket-buy-button),
:host(shoprocket-product-view) {
  display: block;
  margin-bottom: 20px;
}

@layer components {
  /* Icon wrapper should respect Tailwind size classes, not fill parent */
  .sr-icon {
    display: block;
  }
  .sr-icon svg {
    width: 100%;
    height: 100%;
  }

  /* Product grid responsive columns */
  .sr-product-grid {
    @apply grid gap-4;
    background: var(--card);
    padding: var(--sr-product-grid-padding);
    border-radius: var(--radius);
    grid-template-columns: repeat(var(--cols-sm, 2), minmax(0, 1fr));
  }

  @media (min-width: 768px) {
    .sr-product-grid {
      grid-template-columns: repeat(var(--cols-md, 3), minmax(0, 1fr));
    }
  }

  @media (min-width: 1024px) {
    .sr-product-grid {
      grid-template-columns: repeat(var(--cols, 4), minmax(0, 1fr));
    }
  }

  /* Data-loading skeleton system */
  @keyframes skeleton-shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }

  /* Smooth fade-in transition for all loading containers */
  [data-loading] {
    animation: fadeIn 0.2s ease-in;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  /* Apply skeleton effect to all text elements when loading */
  [data-loading] .sr-product-title,
  [data-loading] .sr-product-price,
  [data-loading] .sr-product-detail-title,
  [data-loading] .sr-product-detail-price,
  [data-loading] .sr-product-detail-summary {
    position: relative;
    color: transparent !important;
    user-select: none;
    overflow: hidden;
  }
  
  /* Use ::before for skeleton effect to ensure it always shows */
  [data-loading] .sr-product-title::before,
  [data-loading] .sr-product-price::before,
  [data-loading] .sr-product-detail-title::before,
  [data-loading] .sr-product-detail-price::before,
  [data-loading] .sr-product-detail-summary::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--skeleton-shimmer-gradient);
    background-size: 200% 100%;
    animation: skeleton-shimmer var(--skeleton-shimmer-duration) ease-in-out infinite;
    border-radius: var(--radius);
    z-index: 1;
  }

  /* Specific sizing for skeleton elements */
  [data-loading] .sr-product-title { 
    min-height: 1.25rem; 
    width: 75%;
    display: block;
  }
  
  [data-loading] .sr-product-price { 
    min-height: 1rem; 
    width: 5rem; 
    display: inline-block;
  }
  
  [data-loading] .sr-product-detail-title { 
    min-height: 2rem; 
    width: 75%;
    margin-bottom: 1rem;
  }
  
  [data-loading] .sr-product-detail-price { 
    min-height: 1.75rem; 
    width: 6rem;
    margin-bottom: 1rem;
  }
  
  [data-loading] .sr-product-detail-summary {
    min-height: 4rem;
    width: 100%;
    margin-bottom: 1.5rem;
  }

  /* Variant option skeletons */
  [data-loading] .sr-product-option-label {
    position: relative;
    color: transparent !important;
    user-select: none;
    overflow: hidden;
    display: inline-block;
    min-height: 1.25rem;
    width: 5rem;
    margin-bottom: 0.5rem;
  }

  [data-loading] .sr-product-option-label::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--skeleton-shimmer-gradient);
    background-size: 200% 100%;
    animation: skeleton-shimmer var(--skeleton-shimmer-duration) ease-in-out infinite;
    border-radius: var(--radius);
    z-index: 1;
  }

  [data-loading] .sr-variant-option {
    position: relative;
    overflow: hidden;
    color: transparent !important;
    user-select: none;
    min-width: 3.5rem;
    min-height: 2.5rem;
  }

  [data-loading] .sr-variant-option::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--skeleton-shimmer-gradient);
    background-size: 200% 100%;
    animation: skeleton-shimmer var(--skeleton-shimmer-duration) ease-in-out infinite;
    border-radius: var(--radius);
    z-index: 1;
  }

  /* Button skeletons */
  [data-loading] .sr-button:disabled,
  [data-loading] button[disabled] {
    position: relative;
    overflow: hidden;
    color: transparent !important;
    min-height: 2.5rem;
  }

  [data-loading] .sr-button:disabled::before,
  [data-loading] button[disabled]::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--skeleton-shimmer-gradient);
    background-size: 200% 100%;
    animation: skeleton-shimmer var(--skeleton-shimmer-duration) ease-in-out infinite;
    border-radius: inherit;
    z-index: 1;
  }

  /* Image container skeleton - show shimmer while image is loading */
  .sr-image-loading {
    position: relative;
    background: var(--skeleton-shimmer-gradient);
    background-size: 200% 100%;
    animation: skeleton-shimmer var(--skeleton-shimmer-duration) ease-in-out infinite;
    overflow: hidden;
  }

  /* Also show shimmer during data loading state (initial page load) */
  [data-loading] .sr-product-image-container {
    position: relative;
    background: var(--skeleton-shimmer-gradient);
    background-size: 200% 100%;
    animation: skeleton-shimmer var(--skeleton-shimmer-duration) ease-in-out infinite;
    overflow: hidden;
  }

  /* Media container skeleton */
  [data-loading] .sr-media-container {
    position: relative;
    min-height: 400px;
    background: var(--skeleton-shimmer-gradient);
    background-size: 200% 100%;
    animation: skeleton-shimmer var(--skeleton-shimmer-duration) ease-in-out infinite;
    overflow: hidden;
  }

  /* Hide actual images during initial data loading */
  [data-loading] img {
    opacity: 0;
  }

  /* Fade images during pagination for smooth transition */
  .sr-product-grid[data-loading] .sr-product-image {
    opacity: 0.3;
    transition: opacity 0.15s ease-out;
  }


  /* Semantic Component Classes */

  /* Product Card */
  .sr-product-card {
    @apply flex flex-col h-full text-left;
    background: var(--card);
    color: var(--foreground);
    border-radius: var(--radius);
  }

  /* Product Image Container */
  .sr-product-image-container {
    @apply relative w-full overflow-hidden flex-shrink-0 mb-4;
    aspect-ratio: var(--sr-product-image-aspect-ratio);
    border-radius: var(--sr-product-image-radius);
    box-shadow: var(--tw-shadow);
  }

  .sr-product-image-container.sr-product-clickable {
    @apply cursor-pointer;
  }

  /* Product Image */
  .sr-product-image {
    @apply absolute inset-0 w-full h-full object-cover transition-all duration-500;
    z-index: 2; /* Layer above shimmer */
  }

  .sr-product-image-primary {
    @apply opacity-0;
    transition: opacity 0.3s ease-in;
  }

  .sr-product-image-primary.loaded {
    @apply opacity-100;
  }

  .sr-product-card:hover .sr-product-image-primary {
    @apply scale-105;
  }

  .sr-product-card:hover .sr-product-image-primary.has-hover {
    @apply opacity-0;
  }

  .sr-product-image-hover {
    @apply opacity-0 transition-all duration-300;
  }

  .sr-product-card:hover .sr-product-image-hover {
    @apply opacity-100 scale-110;
  }

  /* Card Content Container */
  .sr-card-content {
    @apply flex flex-col flex-1;
    padding: var(--sr-card-padding);
  }

  /* Product Info Section */
  .sr-product-info {
    @apply flex-1 flex flex-col;
    gap: var(--sr-product-section-gap);
  }

  /* Product Title */
  .sr-product-title {
    @apply font-medium leading-tight transition-colors;
    color: var(--foreground);
    font-size: var(--sr-product-title-size);
    margin-bottom: 0.5rem;
  }

  .sr-product-title.sr-product-clickable {
    @apply cursor-pointer;
  }

  .sr-product-title.sr-product-clickable:hover {
    opacity: 0.6;
  }

  /* Product Price */
  .sr-product-price {
    @apply font-semibold;
    color: var(--foreground);
    font-size: var(--sr-product-price-size);
  }

  /* Product Actions Container */
  .sr-product-actions {
    @apply pt-3 space-y-3;
  }

  /* Product Detail Actions */
  .sr-product-detail-buttons {
    @apply space-y-3;
  }

  /* Button Base */
  .sr-button {
    @apply font-medium transition-all transform cursor-pointer w-full h-11;
    padding: var(--sr-button-padding-y) var(--sr-button-padding-x);
    border-radius: var(--radius);
    font-size: var(--sr-button-font-size);
    box-shadow: var(--tw-shadow);
  }

  .sr-button:hover {
    @apply scale-[1.02];
  }

  .sr-button:disabled {
    @apply cursor-not-allowed opacity-75;
    transform: none;
  }

  /* Primary Button */
  .sr-button-primary {
    background: var(--primary);
    color: var(--primary-foreground);
  }

  @media (hover: hover) and (pointer: fine) {
    .sr-button-primary:hover:not(:disabled) {
      opacity: var(--sr-button-primary-opacity-hover);
    }
  }

  .sr-button-primary:active:not(:disabled) {
    opacity: var(--sr-button-primary-opacity-hover);
  }

  /* Success Button State */
  .sr-button-success {
    background: var(--success, #15803d);
    color: var(--success-foreground, #ffffff);
  }


  /* Button Content */
  .sr-button-content {
    @apply flex items-center justify-center gap-2 w-full min-w-0;
  }

  /* Button Text */
  .sr-button-text {
    @apply truncate min-w-0;
  }

  /* Button Icon */
  .sr-button-icon {
    @apply w-4 h-4 shrink-0;
  }

  /* Cart Components */

  /* Cart Overlay */
  .sr-cart-overlay {
    @apply fixed inset-0 z-[9998] transition-opacity;
    /* Hardcoded overlay - critical UI element for cart drawer backdrop */
    background: rgba(0, 0, 0, 0.5);
  }

  .sr-cart-overlay.open {
    @apply duration-200 opacity-100 pointer-events-auto;
  }

  .sr-cart-overlay.closed {
    @apply duration-150 opacity-0 pointer-events-none;
  }

  /* Cart Toggle Container */
  .sr-cart-toggle-container {
    @apply fixed z-[10000];
  }

  /* Cart Toggle Positions */
  .sr-cart-toggle-bottom-right {
    @apply bottom-5 end-5;
  }

  .sr-cart-toggle-bottom-left {
    @apply bottom-5 start-5;
  }

  .sr-cart-toggle-top-right {
    @apply top-5 end-5;
  }

  .sr-cart-toggle-top-left {
    @apply top-5 start-5;
  }

  .sr-cart-toggle-middle-right {
    @apply top-1/2 end-0 -translate-y-1/2;
  }

  .sr-cart-toggle-middle-left {
    @apply top-1/2 start-0 -translate-y-1/2;
  }

  /* Cart Toggle Button */
  .sr-cart-toggle-button {
    @apply border-none flex items-center justify-center cursor-pointer relative transition-all duration-200 transform hover:scale-105;
    background: var(--card);
    color: var(--card-foreground);
    border-radius: var(--radius);
    width: var(--cart-size);
    height: var(--cart-size);
    /* Hardcoded shadow for visibility - critical UI element needs to stand out */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    user-select: none;
    -webkit-user-select: none;
  }

  @media (max-width: 640px) {
    .sr-cart-toggle-button {
      width: var(--cart-size-sm);
      height: var(--cart-size-sm);
    }
  }

  .sr-cart-toggle-button:hover {
    /* Enhanced shadow on hover - critical UI element */
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
  }

  .sr-cart-toggle-button.hidden {
    @apply opacity-0 pointer-events-none;
  }

  /* Middle position toggle buttons - tab style (narrower, taller) */
  .sr-cart-toggle-middle-right .sr-cart-toggle-button,
  .sr-cart-toggle-middle-left .sr-cart-toggle-button {
    @apply w-12 h-20 flex-col gap-1 rounded-none;
  }

  .sr-cart-toggle-middle-right .sr-cart-toggle-button {
    @apply rounded-s;
  }

  .sr-cart-toggle-middle-left .sr-cart-toggle-button {
    @apply rounded-e;
  }

  @media (max-width: 640px) {
    .sr-cart-toggle-middle-right .sr-cart-toggle-button,
    .sr-cart-toggle-middle-left .sr-cart-toggle-button {
      @apply w-10 h-16;
    }
  }

  /* Cart Panel */
  .sr-cart-panel {
    @apply fixed flex flex-col z-[10001] transition-all duration-300 ease-out;
    @apply overflow-hidden;
    background: var(--card);
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); /* Direct shadow - doesn't affect children */
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }
  
  /* Apply touch-action to all cart elements to prevent zoom */
  .sr-cart-panel * {
    touch-action: manipulation;
  }
  
  /* Mobile zoom prevention */
  @media (max-width: 768px) {
    /* All inputs/selects 16px on mobile to prevent zoom */
    .sr-cart-panel input,
    .sr-cart-panel select {
      font-size: 16px!important;
    }
  }

  /* Cart Panel - Bubble Style */
  .sr-cart-panel-bubble {
    /* Mobile: fullscreen, Desktop: bubble */
    @apply w-[100dvw] h-[100dvh] rounded-none;
    @apply md:w-[440px] md:max-w-[calc(100vw-40px)] md:h-[625px] md:max-h-[calc(100vh-40px)] md:rounded;
  }

  /* Cart Panel - Drawer Style */
  .sr-cart-panel-drawer {
    @apply w-[100dvw] h-[100dvh] rounded-none;
    @apply md:w-[400px] md:max-w-[calc(100vw-40px)] md:h-[100vh];
  }

  /* Cart Panel Positions - Bubble Style */
  .sr-cart-panel-bubble.sr-cart-panel-bottom-right {
    @apply top-0 end-0 md:top-auto md:bottom-5 md:end-5 origin-bottom-right;
  }

  .sr-cart-panel-bubble.sr-cart-panel-bottom-left {
    @apply top-0 start-0 md:top-auto md:bottom-5 md:start-5 origin-bottom-left;
  }

  .sr-cart-panel-bubble.sr-cart-panel-top-right {
    @apply top-0 end-0 md:top-5 md:end-5 origin-top-right;
  }

  .sr-cart-panel-bubble.sr-cart-panel-top-left {
    @apply top-0 start-0 md:top-5 md:start-5 origin-top-left;
  }

  /* Cart Panel Positions - Drawer Style */
  .sr-cart-panel-drawer.sr-cart-panel-bottom-right,
  .sr-cart-panel-drawer.sr-cart-panel-top-right,
  .sr-cart-panel-drawer.sr-cart-panel-middle-right {
    @apply top-0 end-0;
  }

  .sr-cart-panel-drawer.sr-cart-panel-bottom-left,
  .sr-cart-panel-drawer.sr-cart-panel-top-left,
  .sr-cart-panel-drawer.sr-cart-panel-middle-left {
    @apply top-0 start-0;
  }

  /* Cart Panel States - Bubble Style */
  .sr-cart-panel-bubble.open {
    @apply translate-x-0 translate-y-0 opacity-100;
    @apply md:scale-100 md:opacity-100;
  }

  .sr-cart-panel-bubble.closed {
    /* Mobile: slide out, Desktop: scale down */
    @apply translate-x-full opacity-0 md:translate-x-0 md:translate-y-0 md:scale-0;
  }

  /* Left side positions need different slide direction on mobile only */
  .sr-cart-panel-bubble.sr-cart-panel-bottom-left.closed,
  .sr-cart-panel-bubble.sr-cart-panel-top-left.closed {
    @apply -translate-x-full md:translate-x-0;
  }

  /* Cart Panel States - Drawer Style */
  .sr-cart-panel-drawer.open {
    @apply translate-x-0;
  }

  .sr-cart-panel-drawer.closed {
    @apply translate-x-full;
  }

  /* Left side positions need different slide direction */
  .sr-cart-panel-drawer.sr-cart-panel-bottom-left.closed,
  .sr-cart-panel-drawer.sr-cart-panel-top-left.closed,
  .sr-cart-panel-drawer.sr-cart-panel-middle-left.closed {
    @apply -translate-x-full;
  }

  /* Cart Header */
  .sr-cart-header {
    @apply px-4 py-4 flex items-center gap-1;
    @apply relative;
    border-bottom: 1px solid var(--border);
  }
  
  .sr-cart-back-arrow {
    @apply text-lg leading-none p-1 -ms-2 w-8 h-8 rounded hover:bg-[var(--secondary)] transition-colors cursor-pointer;
    background: transparent;
    border: none;
    color: var(--foreground);
    font-weight: 200;
  }

  .sr-cart-title {
    @apply flex-1;
    @apply m-0 text-base font-semibold;
    color: var(--card-foreground);
  }

  /* Cart Close Button */
  .sr-cart-close {
    @apply bg-transparent border-none p-0 w-8 h-8 flex items-center justify-center rounded transition-all duration-200 cursor-pointer;
    color: var(--card-foreground);
    user-select: none;
    -webkit-user-select: none;
  }

  .sr-cart-close:hover {
    background: var(--secondary);
    /* opacity: 0.6; */
  }

  /* Cart Body */
  .sr-cart-body {
    @apply flex-1 overflow-y-auto p-4;
    /* Removed transition-all duration-300 - was causing 300ms delays during checkout navigation */
  }

  /* Cart Footer */
  .sr-cart-footer {
    @apply px-4 py-4 space-y-3;
    border-top: 1px solid var(--border);
  }

  /* Cart Subtotal */
  .sr-cart-subtotal {
    @apply flex justify-between items-center;
  }

  .sr-cart-subtotal-label {
    @apply text-sm;
    color: var(--card-foreground);
    opacity: 0.6;
  }

  .sr-cart-subtotal-amount {
    @apply text-base font-medium;
    color: var(--card-foreground);
  }

  /* Reusable Button Styles */
  .sr-btn {
    @apply py-3 px-4 w-full cursor-pointer text-sm font-medium transition-all duration-200 
           transform hover:scale-[1.01] active:scale-[0.99] disabled:opacity-50 
           disabled:cursor-not-allowed disabled:transform-none;
    border-radius: var(--radius);
    user-select: none;
    -webkit-user-select: none;
  }

  .sr-btn-primary {
    @apply border-none;
    background: var(--primary);
    color: var(--primary-foreground);
  }

  .sr-btn-primary:hover:not(:disabled) {
    opacity: 0.9;
  }

  .sr-btn-secondary {
    @apply bg-transparent;
    border: 1px solid var(--border);
    color: var(--foreground);
  }

  .sr-btn-secondary:hover:not(:disabled) {
    background: var(--muted);
  }

  .sr-btn-icon {
    @apply inline-block w-4 h-4 me-2 align-middle;
  }

  /* Cart Checkout Button - extends sr-btn sr-btn-primary */
  .sr-cart-checkout-button {
    @apply border-none py-3 px-4 w-full cursor-pointer text-sm font-medium transition-all duration-200 transform hover:scale-[1.01] active:scale-[0.99];
    background: var(--primary);
    color: var(--primary-foreground);
    border-radius: var(--radius);
    user-select: none;
    -webkit-user-select: none;
  }

  .sr-cart-checkout-button:hover {
    opacity: 0.9;
  }

  /* Cart Empty State */
  .sr-cart-empty {
    @apply flex flex-col items-center justify-center h-full py-12 text-center animate-[fadeInScale_300ms_ease-out];
  }

  .sr-cart-empty-icon {
    @apply w-16 h-16 mb-4;
    color: var(--card-foreground);
    opacity: 0.3;
  }

  .sr-cart-empty-text {
    @apply text-base mb-6;
    color: var(--card-foreground);
    opacity: 0.6;
  }

  .sr-cart-empty-button {
    @apply text-sm underline underline-offset-2 bg-transparent border-none cursor-pointer transition-colors;
    color: var(--card-foreground);
  }

  .sr-cart-empty-button:hover {
    opacity: 0.8;
  }

  /* Cart Item */
  .sr-cart-item {
    @apply flex gap-3 py-3 last:border-b-0;
    border-bottom: 1px solid var(--border);
  }

  .sr-cart-item-image {
    @apply w-16 h-16 flex-shrink-0 overflow-hidden cursor-pointer relative;
    border-radius: var(--radius);
    background: var(--skeleton-shimmer-gradient);
    background-size: 200% 100%;
    animation: skeleton-shimmer var(--skeleton-shimmer-duration) ease-in-out infinite;
  }

  .sr-cart-item-image img {
    @apply w-full h-full object-cover opacity-0 transition-opacity duration-300;
  }
  
  .sr-cart-item-image img.loaded {
    @apply opacity-100;
  }
  
  /* Stop animation when image is loaded */
  .sr-cart-item-image:has(img.loaded) {
    animation: none;
    background: transparent;
  }

  .sr-cart-item-content {
    @apply flex-1 min-w-0;
  }

  .sr-cart-item-header {
    @apply flex items-start justify-between gap-2;
  }

  .sr-cart-item-title {
    @apply font-medium text-sm mb-0.5 leading-tight cursor-pointer transition-colors;
    color: var(--card-foreground);
  }

  .sr-cart-item-title:hover {
    opacity: 0.6;
  }

  .sr-cart-item-variant {
    @apply text-xs mb-0;
    color: var(--card-foreground);
    opacity: 0.4;
  }

  .sr-cart-item-footer {
    @apply flex items-center justify-between mt-1;
  }

  /* Cart Item Quantity */
  .sr-cart-item-quantity {
    @apply flex items-center gap-2;
  }

  .sr-cart-quantity {
    @apply flex items-center gap-2;
  }

  .sr-cart-quantity-button {
    @apply w-7 h-7 rounded border-none flex items-center justify-center cursor-pointer transition-all duration-200;
    background: var(--primary);
    color: var(--primary-foreground);
    user-select: none;
    -webkit-user-select: none;
  }

  @media (hover: hover) and (pointer: fine) {
    .sr-cart-quantity-button:hover:not(:disabled) {
      background: var(--primary);
      color: var(--primary-foreground);
    }
  }

  .sr-cart-quantity-button:active:not(:disabled) {
    background: var(--primary);
    color: var(--primary-foreground);
  }

  .sr-cart-quantity-button:disabled {
    @apply opacity-50 cursor-not-allowed;
  }

  .sr-cart-quantity-value {
    @apply text-sm font-medium min-w-[20px] text-center;
    color: var(--card-foreground);
  }

  /* Cart Item Price */
  .sr-cart-item-price {
    @apply text-sm font-semibold;
    color: var(--card-foreground);
  }

  /* Cart Item Remove */
  .sr-cart-item-remove {
    @apply border-none bg-transparent p-1 cursor-pointer transition-colors;
    color: var(--card-foreground);
    opacity: 0.4;
    user-select: none;
    -webkit-user-select: none;
  }

  .sr-cart-item-remove:hover {
    color: var(--destructive);
    opacity: 1;
  }

  /* Cart Badge */
  .sr-cart-badge {
    @apply absolute -top-2 -end-2 min-w-[1.25rem] h-5 rounded-full flex items-center justify-center text-xs font-bold px-1;
    background: var(--primary);
    color: var(--primary-foreground);
  }
  
  @media (max-width: 640px) {
    .sr-cart-badge {
      @apply -top-1 -end-1 min-w-[1rem] h-4 text-[10px];
    }
  }

  @keyframes badge-pop {
    0% { transform: scale(1); }
    50% { transform: scale(1.3); }
    100% { transform: scale(1); }
  }

  .sr-badge-number {
    animation: badge-pop 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  /* Powered by text */
  .sr-cart-powered-by {
    @apply text-xs text-center m-0 flex items-center justify-center gap-1;
    color: var(--card-foreground);
    opacity: 0.8;
  }

  .sr-cart-powered-by-link {
    @apply inline-flex items-center gap-1 no-underline transition-opacity;
    color: inherit;
  }

  .sr-cart-powered-by-link:hover {
    opacity: 0.7;
  }

  .sr-secure-icon {
    @apply inline-block flex-shrink-0;
  }

  .sr-cart-logo {
    @apply inline-block align-middle;
    width: 70px;
    height: 13px;
  }
  
  /* Cart Test Mode Indicator */
  .sr-cart-test-indicator {
    @apply text-xs text-center mt-2 py-1 px-2 rounded;
    background: var(--muted);
    color: var(--muted-foreground);
  }
  
  .sr-cart-test-indicator-checkout {
    @apply mt-3;
  }
  
  .sr-cart-test-indicator span {
    @apply font-medium;
  }

  /* Product Detail Components */

  /* Product View Container */
  .sr-product-view-container {
    /* min-height: 500px; */
  }

  /* Product Detail Container */
  .sr-product-detail {
    background: var(--card);
    padding: var(--sr-product-grid-padding);
    border-radius: var(--radius);
  }

  /* Reserve space during loading to prevent CLS */
  .sr-product-detail[data-loading] {
    min-height: 400px;
  }

  /* Product Navigation */
  .sr-product-navigation {
    @apply flex justify-between items-center mb-6;
  }

  .sr-back-button {
    @apply bg-transparent border-none cursor-pointer text-sm font-medium inline-flex items-center gap-2 transition-colors;
    color: var(--card-foreground);
    opacity: 0.6;
  }

  .sr-back-button:hover {
    opacity: 1;
  }
  
  .sr-product-nav-buttons {
    @apply flex gap-2;
  }
  
  .sr-nav-button {
    @apply px-3 py-1 bg-transparent border rounded-md cursor-pointer text-sm font-medium transition-all;
    border-color: var(--border);
    color: var(--card-foreground);
    box-shadow: var(--tw-shadow);
  }
  
  .sr-nav-button:hover:not(.disabled) {
    background: var(--secondary);
  }
  
  .sr-nav-button.disabled {
    @apply cursor-not-allowed opacity-40;
  }

  .sr-back-arrow {
    @apply inline-block;
    width: 0;
    height: 0;
    border-style: solid;
    border-width: 5px 7px 5px 0;
    border-color: transparent currentColor transparent transparent;
  }

  /* Product Detail Grid */
  .sr-product-detail-grid {
    @apply grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-8;
  }

  /* Single column when media is hidden */
  .sr-product-detail-grid[data-no-media] {
    @apply grid-cols-1;
  }

  /* Center and limit width when no media */
  .sr-product-detail-grid[data-no-media] .sr-product-detail-info {
    width: 100%;
    max-width: var(--product-detail-max-width, 100%);
    margin-left: auto;
    margin-right: auto;
  }

  .sr-product-detail-media {
    @apply w-full;
  }

  .sr-product-detail-media-sticky {
    @apply lg:sticky lg:top-4;
  }

  /* Product Detail Images */
  .sr-product-detail-images {
    @apply sticky top-6;
  }

  .sr-product-detail-image-main {
    @apply w-full mb-4;
    aspect-ratio: var(--sr-product-image-aspect-ratio);
  }

  /* Image Thumbnails */
  .sr-product-detail-thumbnails {
    @apply grid grid-cols-4 gap-2;
  }

  .sr-product-detail-thumbnail {
    @apply relative aspect-square overflow-hidden cursor-pointer transition-all;
    border: 2px solid transparent;
    border-radius: var(--radius);
  }

  .sr-product-detail-thumbnail:hover {
    border-color: var(--primary);
    opacity: 0.8;
  }

  .sr-product-detail-thumbnail.active {
    border-color: var(--primary);
  }

  /* Product Detail Content */
  .sr-product-detail-content {
    @apply space-y-4;
  }

  .sr-product-detail-title {
    @apply text-2xl font-medium mb-2 m-0;
    color: var(--card-foreground);
  }

  .sr-product-detail-price {
    @apply text-2xl font-medium mb-2;
    color: var(--primary);
  }
  
  /* Stock Status Styles */
  .sr-stock-status {
    @apply text-xs mb-4 p-1;
    display: inline-flex;
    width: fit-content;
    border-radius: var(--radius);
  }

  .sr-in-stock {
    color: var(--success, #16a34a); /* Green-700 for better contrast (4.5:1 ratio) - fallback if theme doesn't define --success */
    border-color: color-mix(in srgb, var(--success, #16a34a) 20%, transparent);
    background-color: color-mix(in srgb, var(--success, #16a34a) 10%, transparent);
  }

  .sr-low-stock {
    color: var(--warning, #ea580c); /* Orange-700 for better contrast (4.6:1 ratio) - fallback if theme doesn't define --warning */
    border-color: color-mix(in srgb, var(--warning, #ea580c) 20%, transparent);
    background-color: color-mix(in srgb, var(--warning, #ea580c) 10%, transparent);
  }

  .sr-out-of-stock {
    color: var(--destructive); /* Red-700 for better contrast (5.9:1 ratio) */
    border-color: color-mix(in srgb, var(--destructive) 20%, transparent);
    background-color: color-mix(in srgb, var(--destructive) 10%, transparent);
  }

  .sr-product-detail-summary {
    @apply mb-6 text-sm leading-relaxed;
    color: var(--card-foreground);
    opacity: 0.6;
  }

  /* Product Detail Variants */
  .sr-product-detail-variants {
    @apply space-y-4;
  }

  .sr-product-options {
    @apply space-y-6;
  }
  
  .sr-product-option {
    @apply space-y-2;
  }
  
  .sr-product-option-label {
    @apply text-sm font-medium;
    color: var(--card-foreground);
  }
  
  .sr-product-option-values {
    @apply flex flex-wrap gap-2;
  }
  
  .sr-variant-group {
    @apply space-y-2;
  }

  .sr-variant-label {
    @apply text-sm font-medium;
    color: var(--card-foreground);
  }

  .sr-variant-options {
    @apply flex flex-wrap gap-2;
  }

  .sr-variant-option {
    @apply px-4 py-2 border cursor-pointer transition-all text-sm;
    border-radius: var(--radius); /* Match global border radius */
    border-color: var(--border);
    background: var(--card);
    color: var(--card-foreground);
    box-shadow: var(--tw-shadow);
  }

  .sr-variant-option:hover {
    border-color: var(--primary);
  }

  .sr-variant-option.selected {
    background: var(--primary);
    color: var(--primary-foreground);
    border-color: var(--primary);
  }

  .sr-variant-option:disabled {
    @apply opacity-50 cursor-not-allowed relative overflow-hidden;
  }
  
  .sr-variant-option:disabled::after {
    content: '';
    @apply absolute inset-0 pointer-events-none;
    background: linear-gradient(
      to bottom right,
      transparent calc(50% - 1px),
      var(--foreground, #1f2937) calc(50% - 1px),
      var(--foreground, #1f2937) calc(50% + 1px),
      transparent calc(50% + 1px)
    );
    opacity: 0.3;
  }

  /* Product Detail Actions */
  .sr-product-detail-actions {
    @apply mt-8 space-y-4;
  }

  .sr-quantity-selector {
    @apply space-y-2;
    width: var(--quantity-width, 150px);
    max-width: 100%;
    margin-top: var(--spacing-md, 1rem);
    margin-bottom: var(--spacing-md, 1rem);
  }

  .sr-quantity-label {
    @apply text-sm font-medium block;
    color: var(--card-foreground);
  }

  .sr-quantity-controls {
    @apply flex items-center border w-full overflow-hidden;
    border-radius: var(--radius); /* Match global border radius */
    border-color: var(--border);
    box-shadow: var(--tw-shadow);
  }

  .sr-quantity-button {
    @apply w-10 h-10 flex items-center justify-center cursor-pointer transition-colors;
    background: transparent;
    color: var(--card-foreground);
  }

  @media (hover: hover) and (pointer: fine) {
    .sr-quantity-button:hover:not(:disabled) {
      background: var(--secondary);
    }
  }

  .sr-quantity-button:active:not(:disabled) {
    background: var(--secondary);
  }

  .sr-quantity-button:disabled {
    @apply opacity-50 cursor-not-allowed;
  }

  .sr-quantity-input {
    @apply flex-1 min-w-0 text-center font-medium border-0 outline-none;
    color: var(--card-foreground);
    background: transparent;
    -moz-appearance: textfield; /* Remove spinner in Firefox */
  }

  .sr-quantity-input::-webkit-outer-spin-button,
  .sr-quantity-input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  .sr-quantity-input:disabled {
    @apply opacity-50 cursor-not-allowed;
  }

  .sr-quantity-value {
    @apply w-12 text-center font-medium;
    color: var(--card-foreground);
  }

  /* Add to Cart Button (reuse from existing) */
  .sr-add-to-cart-button {
    background: var(--primary);
    color: var(--primary-foreground);
  }

  .sr-add-to-cart-button:hover {
    opacity: 0.9;
  }

  .sr-add-to-cart-button:disabled {
    @apply opacity-50 cursor-not-allowed transform-none;
  }

  .sr-add-to-cart-button.success {
    background: var(--success, #15803d);
    color: var(--success-foreground, #ffffff);
  }

  .sr-add-to-cart-button.success:hover {
    background: var(--success, #15803d);
    opacity: 0.9;
  }

  /* View Cart Button */
  .sr-view-cart-button {
    @apply border-1;
    background: var(--card);
    color: var(--foreground);
    border-color: var(--border);
  }

  .sr-view-cart-button:hover {
    background: var(--secondary);
  }


  /* Product Description */
  .sr-product-description {
    @apply mt-8 pt-8 border-t;
    border-color: var(--border);
  }

  .sr-product-description-title {
    @apply text-2xl font-semibold mb-4;
    color: var(--foreground);
  }

  .sr-product-description-content {
    @apply text-base leading-relaxed space-y-4;
    color: var(--foreground);
  }

  .sr-product-description-content p {
    @apply mb-4;
  }

  .sr-product-description-content strong {
    @apply font-semibold;
    color: var(--foreground);
  }

  /* Product Detail Info Text */
  .sr-product-detail-info-text {
    @apply text-xs text-center mt-6;
    color: var(--muted-foreground);
    /* Removed opacity: 0.6 to maintain proper contrast (4.5:1 minimum for accessibility) */
  }

  /* Zoom Lens */
  .sr-zoom-lens {
    @apply absolute pointer-events-none border rounded-full w-24 h-24 shadow-2xl;
    border-color: var(--border);
    background: var(--card);
    opacity: 0.3;
  }
}

/* No custom utility classes needed - we use Tailwind arbitrary values with CSS variables */


@keyframes slideIn {
  0% {
    transform: translateY(-100%);
    opacity: 0;
  }
  100% {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slideInCartRight {
  0% {
    transform: translateX(120px);
    opacity: 0;
  }
  100% {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideInCartLeft {
  0% {
    transform: translateX(-120px);
    opacity: 0;
  }
  100% {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideOutCartRight {
  0% {
    transform: translateX(0);
    opacity: 1;
  }
  100% {
    transform: translateX(120px);
    opacity: 0;
  }
}

@keyframes slideOutCartLeft {
  0% {
    transform: translateX(0);
    opacity: 1;
  }
  100% {
    transform: translateX(-120px);
    opacity: 0;
  }
}

/* Notification Styles */
.sr-notification {
  @apply fixed top-4 end-4 start-4 sm:start-auto sm:max-w-sm z-[10000];
  animation: slideIn 0.3s ease-out;
}

/* In-cart notification (absolutely positioned covering header) */
.sr-in-cart-notification {
  @apply absolute start-0 end-0 top-0 bottom-0 z-30;
  @apply flex items-center;
  min-height: 72px; /* Match typical header height */
}

.sr-in-cart-notification-content {
  @apply w-full flex items-center gap-3;
  padding: 1rem; /* 16px all around */
  background: #fef2f2;
}

.sr-in-cart-notification.sr-notification-error * {
  color: var(--destructive, #ef4444);
}

.sr-in-cart-notification-message {
  @apply flex-1;
}

.sr-in-cart-notification-message p {
  @apply text-sm font-medium m-0;
}

.sr-notification-content {
  @apply rounded-lg p-4 shadow flex items-start gap-3;
  border-radius: var(--radius);
  padding: var(--spacing);
  box-shadow: var(--tw-shadow);
}

.sr-notification-error .sr-notification-content {
  background: rgba(239, 68, 68, 0.1);
  border-color: rgba(239, 68, 68, 0.2);
  color: var(--destructive, #ef4444);
}

/* Error styling for ALL elements in error notifications */
.sr-add-notification.sr-notification-error {
  background: #fef2f2 !important;
}
.sr-add-notification.sr-notification-error * {
  color: var(--destructive, #ef4444);
}
/* Make the arrow match error background */
.sr-add-notification.sr-notification-error .sr-arrow-inner {
  border-right-color: #fef2f2;
}

.sr-notification-success .sr-notification-content {
  background: rgba(21, 128, 61, 0.1);
  border-color: rgba(21, 128, 61, 0.2);
  color: var(--success, #15803d);
}

.sr-notification-icon {
  @apply w-5 h-5 flex-shrink-0;
  opacity: 0.6;
}

.sr-notification-message {
  @apply flex-1;
}

.sr-notification-message p {
  @apply text-sm font-medium m-0;
}

/* Error and Success Message Styles */
.sr-error-message {
  @apply bg-red-50 border border-red-200 text-red-700 p-3 rounded-lg mb-3;
  background: rgba(239, 68, 68, 0.1);
  border-color: rgba(239, 68, 68, 0.2);
  color: var(--destructive, #ef4444);
}

.sr-success-message {
  @apply flex items-center gap-2 p-3 rounded-lg mb-3;
  background: rgba(21, 128, 61, 0.1);
  border: 1px solid rgba(21, 128, 61, 0.2);
  color: var(--success, #15803d);
}


/* Unified Media Container System */
.sr-media-container {
  @apply relative w-full h-full overflow-hidden;
  background: var(--media-bg, var(--muted));
  box-shadow: var(--tw-shadow);
}

/* Only apply border-radius when media container is the outermost element */
.sr-media-container.sr-product-detail-image-main {
  border-radius: var(--radius);
}

/* For containers inside bordered elements, no border-radius needed - parent's overflow:hidden handles it */
.sr-product-thumbnail .sr-media-container,
.sr-product-detail-thumbnail .sr-media-container {
  border-radius: 0;
}

.sr-media-container[data-loaded="false"] .sr-media-image {
  opacity: 0;
}

.sr-media-container[data-loaded="true"] .sr-media-image {
  opacity: 1;
  transition: opacity 0.3s ease;
}

.sr-media-loading {
  @apply absolute inset-0;
  background: var(--skeleton-shimmer-gradient);
  background-size: 200% 100%;
  animation: skeleton-shimmer var(--skeleton-shimmer-duration) ease-in-out infinite;
}

.sr-media-image {
  @apply absolute inset-0 w-full h-full object-cover;
}

/* Specific implementations */
.sr-product-detail-image-main[data-zoom-enabled="true"] .sr-media-image {
  @apply cursor-zoom-in;
}

.sr-product-detail-image-main[data-zoom-active="true"] .sr-media-image {
  @apply cursor-zoom-out;
}

/* Zoom functionality */
.sr-product-detail-image-main[data-zoom-active="true"] {
  @apply cursor-zoom-out;
}

.sr-product-detail-image-zoom {
  @apply absolute inset-0 pointer-events-none;
  transform: scale(2);
  transform-origin: var(--zoom-x) var(--zoom-y);
}

.sr-zoom-lens {
  @apply absolute w-32 h-32 border-2 border-white rounded-full pointer-events-none shadow;
  left: var(--lens-x);
  top: var(--lens-y);
  transform: translate(-50%, -50%);
  background: rgba(255, 255, 255, 0.1);
}

.sr-product-thumbnails {
  @apply grid grid-cols-4 gap-2 mt-4;
}

.sr-product-thumbnail {
  @apply relative aspect-square overflow-hidden cursor-pointer border-2 border-transparent;
  border-radius: var(--radius);
  background-color: var(--muted);
}

.sr-product-thumbnail.active {
  border-color: var(--primary);
  @apply ring-2;
  --tw-ring-color: var(--primary);
  --tw-ring-opacity: 0.2;
}

.sr-product-thumbnail:hover:not(.active) {
  border-color: var(--border);
}

.sr-product-thumbnail-image {
  @apply absolute inset-0 w-full h-full object-cover;
}

/* Loading Spinner Styles */
.sr-spinner-container {
  @apply inline-flex items-center justify-center;
}

.sr-spinner {
  @apply animate-spin inline-block rounded-full border-solid;
  border-right-color: transparent;
  opacity: 0.25;
}

.sr-spinner-sm {
  @apply w-4 h-4 border-2;
}

.sr-spinner-md {
  @apply w-6 h-6;
  border-width: 3px;
}

.sr-spinner-lg {
  @apply w-8 h-8 border-4;
}

.sr-loading-overlay {
  @apply flex flex-col items-center justify-center gap-4 py-8 h-full;
}

.sr-loading-message {
  @apply text-sm;
  color: rgba(var(--foreground-rgb, 0, 0, 0), 0.6);
}

.sr-loading-spinner {
  @apply flex items-center justify-center h-5;
}

/* Fade animations for cart content */
@keyframes fadeIn {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

@keyframes fadeOut {
  0% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}

@keyframes priceFlash {
  0% {
    background-color: transparent;
    transform: scale(1);
  }
  20% {
    background-color: rgba(34, 197, 94, 0.1);
    transform: scale(1.05);
  }
  100% {
    background-color: transparent;
    transform: scale(1);
  }
}

@keyframes slideOutRight {
  0% {
    transform: translateX(0);
    opacity: 1;
  }
  100% {
    transform: translateX(100%);
    opacity: 0;
  }
}

@keyframes collapseHeight {
  0% {
    max-height: 200px;
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
  100% {
    max-height: 0;
    opacity: 0;
    padding-top: 0;
    padding-bottom: 0;
    margin-top: 0;
    margin-bottom: 0;
  }
}

@keyframes fadeInScale {
  0% {
    opacity: 0;
    transform: scale(0.95);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes slideInNotification {
  0% {
    opacity: 0;
    transform: translateX(40px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideOutNotification {
  0% {
    opacity: 1;
    transform: translateX(0);
  }
  100% {
    opacity: 0;
    transform: translateX(40px);
  }
}
@keyframes slideInNotificationLeft {
  0% {
    opacity: 0;
    transform: translateX(-40px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}
@keyframes slideOutNotificationLeft {
  0% {
    opacity: 1;
    transform: translateX(0);
  }
  100% {
    opacity: 0;
    transform: translateX(-40px);
  }
}

@keyframes slideDownIn {
  0% {
    opacity: 0;
    transform: translateY(-20px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideDownOut {
  0% {
    opacity: 1;
    transform: translateY(0);
  }
  100% {
    opacity: 0;
    transform: translateY(-20px);
  }
}
@keyframes slideOutAndCollapse {
  0% {
    transform: translateX(0);
    opacity: 1;
    max-height: 200px;
  }
  50% {
    transform: translateX(120px);
    opacity: 0;
    max-height: 200px;
  }
  100% {
    transform: translateX(120px);
    opacity: 0;
    max-height: 0;
    margin: 0;
    padding: 0;
  }
}


/* Additional Cart Component Styles */
.sr-cart-item-container {
  @apply overflow-hidden;
  transition: all 300ms ease-out;
  max-height: 200px;
  opacity: 1;
}

.sr-cart-item-container.removing {
  animation: slideOutAndCollapse 300ms ease-in forwards;
}

.sr-cart-item-info {
  @apply flex-1;
}

.sr-cart-item-subtotal,
.sr-cart-total-price {
  @apply inline-block px-1 -mx-1;
  border-radius: var(--radius);
}

.sr-cart-item-subtotal.price-changed,
.sr-cart-total-price.price-changed {
  animation: priceFlash 600ms ease-out;
}

.sr-cart-empty-container {
  @apply flex flex-col items-center justify-center gap-1;
}

/* Add Notification Styles */
.sr-add-notification {
  @apply absolute px-3 py-3 min-w-[260px] max-w-[320px];
  background: var(--card);
  border-radius: var(--radius);
  box-shadow: var(--tw-shadow);
  z-index: -1;
}

@media (max-width: 640px) {
  .sr-add-notification {
    @apply px-2 py-2 min-w-[200px] max-w-[240px];
  }
}

.sr-add-notification-content {
  @apply flex items-center gap-3 w-full;
}

@media (max-width: 640px) {
  .sr-add-notification-content {
    @apply gap-2;
  }
}

.sr-add-notification-image {
  @apply w-10 h-10 flex-shrink-0 overflow-hidden;
  border-radius: var(--radius);
  background: var(--secondary);
}

@media (max-width: 640px) {
  .sr-add-notification-image {
    @apply w-8 h-8;
  }
}

.sr-add-notification-img {
  @apply w-full h-full object-cover object-center;
}

.sr-add-notification-details {
  @apply flex-1 min-w-0;
}

.sr-add-notification-title {
  @apply text-sm font-medium leading-tight mb-0.5 truncate;
  color: var(--card-foreground);
}

@media (max-width: 640px) {
  .sr-add-notification-title {
    @apply text-xs;
  }
}

.sr-add-notification-info {
  @apply flex items-center gap-2;
}

.sr-add-notification-price {
  @apply text-xs flex-shrink-0;
  color: var(--card-foreground);
}

@media (max-width: 640px) {
  .sr-add-notification-price {
    @apply text-[10px];
  }
}

.sr-add-notification-variant {
  @apply text-xs truncate;
  color: var(--muted-foreground);
}

.sr-arrow-inner {
  @apply w-0 h-0;
  border-top: 5px solid transparent;
  border-bottom: 5px solid transparent;
  border-right: 6px solid white;
}

.sr-cart-icon {
  @apply w-6 h-6 flex;
}

.sr-cart-badge-count {
  @apply text-sm font-bold;
  color: var(--card-foreground);
}

/* Add Notification Position Classes */
.sr-notification-bottom-right {
  @apply bottom-0 end-full me-2;
}

.sr-notification-bottom-left {
  @apply bottom-0 start-full ms-2;
}

.sr-notification-top-right {
  @apply top-0 end-full me-2;
}

.sr-notification-top-left {
  @apply top-0 start-full ms-2;
}

.sr-notification-middle-right {
  @apply end-full top-1/2 -translate-y-1/2 me-2;
}

.sr-notification-middle-left {
  @apply start-full top-1/2 -translate-y-1/2 ms-2;
}

/* Notification Animations */
.sr-notification-slide-in {
  animation: slideInNotification 0.3s ease-out;
}

.sr-notification-slide-out {
  animation: slideOutNotification 0.3s ease-out;
}

/* Left-side specific animations */
.sr-notification-bottom-left.sr-notification-slide-in,
.sr-notification-top-left.sr-notification-slide-in,
.sr-notification-middle-left.sr-notification-slide-in {
  animation: slideInNotificationLeft 0.3s ease-out;
}

.sr-notification-bottom-left.sr-notification-slide-out,
.sr-notification-top-left.sr-notification-slide-out,
.sr-notification-middle-left.sr-notification-slide-out {
  animation: slideOutNotificationLeft 0.3s ease-out;
}

.sr-notification-slide-down-in {
  animation: slideDownIn 0.3s ease-out;
}

.sr-notification-slide-down-out {
  animation: slideDownOut 0.3s ease-out;
}

/* Notification Arrow */
.sr-notification-arrow {
  @apply absolute top-1/2 -translate-y-1/2;
}

.sr-notification-arrow-left {
  @apply start-0 -translate-x-full;
}

.sr-notification-arrow-right {
  @apply end-0 translate-x-full rotate-180;
}

/* Cart Animation Classes */
.sr-cart-animation-in-header {
  @apply md:opacity-0 md:animate-[fadeIn_200ms_ease-out_100ms_forwards];
}

.sr-cart-animation-out-header {
  @apply md:opacity-0 md:animate-[fadeOut_100ms_ease-out_forwards];
}

.sr-cart-animation-in-items {
  @apply md:opacity-0 md:animate-[fadeIn_200ms_ease-out_150ms_forwards];
}

.sr-cart-animation-out-items {
  @apply md:opacity-0 md:animate-[fadeOut_100ms_ease-out_forwards];
}

.sr-cart-animation-in-footer {
  @apply md:opacity-0 md:animate-[fadeIn_200ms_ease-out_300ms_forwards];
}

.sr-cart-animation-out-footer {
  @apply md:opacity-0 md:animate-[fadeOut_50ms_ease-out_forwards];
}

.sr-catalog-list-view.hidden {
  display: none !important;
}

/* Catalog Filters - Uses field system with floating labels */
.sr-catalog-filters {
  @apply mb-6;
}

.sr-filters-horizontal {
  @apply flex flex-wrap gap-3 items-center;
  /* Only prevent wrapping on larger screens where everything actually fits */
  @media (min-width: 1280px) {
    @apply flex-nowrap;
  }
}

.sr-filters-sidebar {
  /* Use horizontal layout on mobile/tablet (same as horizontal filters) */
  @apply flex flex-wrap gap-3;

  /* Switch to vertical sidebar layout on desktop only */
  @media (min-width: 1024px) {
    @apply flex-col gap-4;
  }
}

/* Sidebar layout grid: filters left, products right */
.sr-catalog-list-view[data-layout="sidebar"] {
  @apply grid gap-6;
  grid-template-columns: 1fr; /* Mobile/tablet: stacked */
}

@media (min-width: 1024px) {
  .sr-catalog-list-view[data-layout="sidebar"] {
    grid-template-columns: 280px 1fr; /* Desktop: 280px sidebar + flex products */
  }

  /* Make filters sticky on scroll for better UX */
  .sr-catalog-list-view[data-layout="sidebar"] .sr-catalog-filters {
    @apply sticky top-4;
    max-height: calc(100vh - 2rem);
    overflow-y: auto;
    /* Padding prevents shadow clipping from overflow */
    padding: 1rem;
    margin: -1rem;
  }
}

/* Adjust filter widths for sidebar - only full width on desktop when vertical */
@media (min-width: 1024px) {
  .sr-filters-sidebar .sr-filter-group {
    @apply w-full;
  }
}

/* Filter container sizing */
.sr-filter-group {
  @apply flex;
}

.sr-filter-search {
  flex: 1 1 100%; /* Force full width on mobile/tablet, push other items to next row */
  /* Fixed width on desktop */
  @media (min-width: 1024px) {
    flex: 0 0 auto;
    @apply w-64;
  }
}

/* Ensure field group inside search takes full width */
.sr-filter-search .sr-field-group,
.sr-filter-search .sr-field-group-with-icon {
  @apply w-full;
}

.sr-filter-sort,
.sr-filter-category,
.sr-filter-per-page {
  @apply flex-1; /* 50% each on mobile/tablet (flex-1 in flex-wrap) */
  /* Auto width on desktop with minimum width */
  @media (min-width: 1024px) {
    @apply flex-initial w-auto flex-shrink-0;
    min-width: 100px;
  }
}

/* Ensure field groups inside sort/category/per-page take full width on mobile */
.sr-filter-sort .sr-field-group,
.sr-filter-category .sr-field-group,
.sr-filter-per-page .sr-field-group {
  @apply w-full;
}

/* Override field styles for filter toolbar context (larger touch targets only) */
.sr-catalog-filters .sr-field-input,
.sr-catalog-filters .sr-field-select {
  min-height: 3.25rem; /* 52px to match price range slider height */
}

/* Show empty value options in catalog filters (Featured, All, etc.) */
.sr-catalog-filters .sr-field-select option[value=""] {
  display: block;
}

/* Search field needs room for clear button */
.sr-catalog-filters .sr-search-input {
  @apply pr-9;
}

/* Clear button positioning */
.sr-search-clear {
  @apply absolute right-2 top-1/2 -translate-y-1/2 w-6 h-6 cursor-pointer z-10;
  @apply flex items-center justify-center rounded-md;
  @apply transition-opacity hover:opacity-60;
  color: var(--muted-foreground);
  background: transparent;
  border: none;
  padding: 0;
}

.sr-search-clear svg {
  @apply w-4 h-4;
}

/* Stock filter - simple checkbox */
.sr-filter-stock {
  flex: 0 0 auto;
}

/* Product count filter */
.sr-filter-product-count {
  flex: 0 0 auto;
}

.sr-product-count {
  @apply text-sm whitespace-nowrap;
  color: var(--muted-foreground);
}

/* Price Range Slider */
.sr-filter-price-range {
  flex: 1 1 100%; /* Full width on mobile */
  min-width: 0;

  /* Auto width on desktop like Sort/Category */
  @media (min-width: 1024px) {
    flex: 0 1 auto;
    min-width: 240px;
    max-width: 280px;
  }
}

.sr-filter-price-range .sr-field-group {
  @apply w-full rounded-md;
  box-shadow: var(--tw-shadow);
}

/* Price Range Field - matches field-select styling EXACTLY */
.sr-price-range-field {
  @apply w-full border text-sm relative;
  background: var(--card);
  color: var(--foreground);
  border-radius: var(--radius);
  border-color: var(--border);
  height: 3.25rem; /* Fixed height to match other filters exactly */
  transition: border-color 0.2s ease;
  padding: 1.25rem 12px 0 12px; /* Top padding for header, no bottom padding */
  box-sizing: border-box; /* Ensure consistent sizing */
  /* NO box-shadow here - sr-field-group already has it */

  /* Only apply min-width on desktop */
  @media (min-width: 1024px) {
    min-width: 180px;
  }
}

.sr-price-range-field:hover:not(:focus) {
  border-color: var(--border);
}

.sr-price-range-field:focus-within {
  outline: none;
  border-color: var(--primary);
}

.sr-price-range-header {
  @apply flex justify-between items-center absolute;
  top: 0.25rem; /* 4px - match floating label position */
  left: 0.75rem; /* 12px - match label left position */
  right: 0.75rem; /* 12px - match padding */
  gap: 0.5rem;
}

.sr-price-range-label {
  @apply text-xs font-normal;
  color: var(--muted-foreground);
  line-height: 1;
  white-space: nowrap;
}

.sr-price-range-values {
  @apply text-xs font-normal tabular-nums;
  color: var(--muted-foreground);
  line-height: 1;
  white-space: nowrap;
}

.sr-price-range-slider {
  @apply relative w-full;
  height: 28px; /* Match input height so track aligns with thumbs */
  display: flex;
  align-items: center;
  margin-top: 0; /* Remove margin */
}

/* Background track - always visible */
.sr-price-range-slider::before {
  content: '';
  @apply absolute w-full rounded-full;
  height: 5px; /* Track height for better visibility */
  top: 50%;
  transform: translateY(-50%);
  background: var(--border);
  pointer-events: none;
}

/* Range inputs - stacked on top of each other */
.sr-price-range-slider input[type="range"] {
  @apply absolute w-full appearance-none bg-transparent;
  -webkit-appearance: none;
  height: 28px; /* Match container height */
  top: 0;
  left: 0;
  pointer-events: none;
  margin: 0;
  padding: 0;
}

/* Make the thumbs interactive */
.sr-price-range-slider input[type="range"]::-webkit-slider-thumb {
  pointer-events: auto;
  -webkit-appearance: none;
}

.sr-price-range-slider input[type="range"]::-moz-range-thumb {
  pointer-events: auto;
}

/* Hide default tracks - we use our own background */
.sr-price-range-slider input[type="range"]::-webkit-slider-track {
  background: transparent;
  border: none;
}

.sr-price-range-slider input[type="range"]::-moz-range-track {
  background: transparent;
  border: none;
}

/* Thumb styling - balanced size for touch targets and visual appeal */
.sr-price-range-slider input[type="range"]::-webkit-slider-thumb {
  @apply rounded-full cursor-grab;
  -webkit-appearance: none;
  width: 20px;
  height: 20px;
  background: var(--background);
  border: 2px solid var(--border);
  box-shadow: var(--tw-shadow);
  position: relative;
  z-index: 4;
  transition: all 0.15s ease;
}

.sr-price-range-slider input[type="range"]::-moz-range-thumb {
  @apply rounded-full cursor-grab;
  width: 20px;
  height: 20px;
  background: var(--background);
  border: 2px solid var(--border);
  box-shadow: var(--tw-shadow);
  position: relative;
  z-index: 4;
  transition: all 0.15s ease;
}

/* Hover states */
.sr-price-range-slider input[type="range"]:hover::-webkit-slider-thumb {
  transform: scale(1.1);
  box-shadow: var(--tw-shadow);
}

.sr-price-range-slider input[type="range"]:hover::-moz-range-thumb {
  transform: scale(1.1);
  box-shadow: var(--tw-shadow);
}

/* Active/dragging state */
.sr-price-range-slider input[type="range"]:active::-webkit-slider-thumb {
  @apply cursor-grabbing;
  transform: scale(1.05);
  box-shadow: var(--tw-shadow);
  border-color: var(--foreground);
}

.sr-price-range-slider input[type="range"]:active::-moz-range-thumb {
  @apply cursor-grabbing;
  transform: scale(1.05);
  box-shadow: var(--tw-shadow);
  border-color: var(--foreground);
}

/* Ensure max slider is above min slider */
.sr-range-max {
  z-index: 5;
}

/* Pagination */
.sr-pagination {
  @apply flex items-center justify-center gap-2 mt-4 py-4;
}

.sr-pagination-pages {
  @apply flex items-center gap-1;
}

.sr-pagination-button {
  @apply px-3 py-2 border rounded-md cursor-pointer text-sm font-medium transition-all;
  background: var(--card);
  border-color: var(--border);
  color: var(--card-foreground);
  box-shadow: var(--tw-shadow);
}

.sr-pagination-button:hover:not(:disabled):not(.disabled) {
  background: var(--secondary);
}

.sr-pagination-button:disabled,
.sr-pagination-button.disabled {
  @apply cursor-not-allowed opacity-40;
}

.sr-pagination-page {
  @apply min-w-[2.5rem] text-center;
}

.sr-pagination-page.active {
  background: var(--primary);
  color: var(--primary-foreground);
  border-color: var(--primary);
  @apply cursor-default opacity-100;
}

.sr-pagination-page.active:hover {
  background: var(--primary);
}

.sr-pagination-ellipsis {
  @apply px-2 text-sm;
  color: var(--muted-foreground);
}

/* ==========================================
 * CAROUSEL STYLES
 * ========================================== */

.sr-carousel-wrapper {
  @apply relative w-full;
  @apply rounded-lg p-6;
  background: var(--card);
  overflow: visible; /* Allow arrows to show outside */
}

.sr-carousel-container {
  @apply flex gap-4 overflow-x-scroll;
  scroll-snap-type: x mandatory;
  scroll-behavior: smooth;
  scrollbar-width: none; /* Firefox */
  -webkit-overflow-scrolling: touch;
  /* Ensure scroll works */
  overflow-y: hidden;
  /* Force scrollable */
  -webkit-overflow-scrolling: touch;
}

.sr-carousel-container::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Edge */
}

.sr-carousel-item {
  flex: 0 0 calc((100% - (var(--cols, 4) - 1) * 1rem) / var(--cols, 4));
  scroll-snap-align: start;
  /* Removed scroll-snap-stop: always to allow programmatic scrolling past multiple items */
}

/* Responsive carousel items */
@media (max-width: 1023px) {
  .sr-carousel-item {
    flex: 0 0 calc((100% - (var(--cols-md, 3) - 1) * 1rem) / var(--cols-md, 3));
  }
}

@media (max-width: 767px) {
  .sr-carousel-item {
    flex: 0 0 calc((100% - (var(--cols-sm, 2) - 1) * 1rem) / var(--cols-sm, 2));
  }
}

/* Carousel navigation arrows */
.sr-carousel-arrow {
  @apply absolute top-1/2 -translate-y-1/2 z-10;
  @apply w-12 h-12;
  @apply flex items-center justify-center;
  @apply transition-all duration-200;
  @apply cursor-pointer;
  background: var(--card);
  color: var(--card-foreground);
  border-radius: var(--radius);
  /* Hardcoded shadow for visibility - critical navigation element */
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  border: none;
}

.sr-carousel-arrow:hover:not(:disabled) {
  background: var(--primary);
  color: var(--primary-foreground);
  /* Enhanced shadow on hover - critical navigation element */
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
}

.sr-carousel-arrow:disabled {
  @apply opacity-40 cursor-not-allowed;
}

.sr-carousel-arrow-prev {
  @apply left-0;
}

.sr-carousel-arrow-next {
  @apply right-0;
}

/* Hide arrows on small screens */
@media (max-width: 640px) {
  .sr-carousel-arrow {
    @apply hidden;
  }
}

/* Carousel dots indicator */
.sr-carousel-dots {
  @apply flex justify-center gap-2 mt-6;
}

.sr-carousel-dot {
  @apply w-2 h-2 rounded-full transition-all duration-200;
  background: var(--muted);
}

.sr-carousel-dot.active {
  background: var(--primary);
  @apply w-6;
}

.sr-carousel-dot:hover:not(.active) {
  background: var(--muted-foreground);
  @apply opacity-70;
}

/* Product modal overlay */
.sr-product-modal-overlay {
  @apply fixed inset-0 z-50;
  @apply flex items-center justify-center;
  @apply p-4;
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(4px);
}

.sr-product-modal {
  @apply relative w-full max-w-4xl;
  @apply rounded-lg overflow-hidden;
  @apply max-h-[90vh] overflow-y-auto;
  background: var(--background);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
}

.sr-product-modal-close {
  @apply absolute top-4 right-4 z-10;
  @apply w-10 h-10 rounded-full;
  @apply flex items-center justify-center;
  @apply transition-all duration-200;
  background: var(--background);
  border: 1px solid var(--border);
  color: var(--foreground);
}

.sr-product-modal-close:hover {
  background: var(--destructive);
  color: var(--destructive-foreground);
  border-color: var(--destructive);
  transform: scale(1.1);
}

/* Empty State */
.sr-empty-state {
  @apply text-center py-12 px-6;
  grid-column: 1 / -1; /* Span full width of grid */
  color: var(--muted-foreground);
}

.sr-empty-state-title {
  @apply text-xl font-semibold mb-2;
  color: var(--foreground);
}

.sr-empty-state-message {
  @apply text-base max-w-md mx-auto;
  color: var(--muted-foreground);
}

/* Product Detail Error State */
.sr-product-detail-error {
  @apply py-12 px-6 text-center;
}

.sr-product-detail-error .sr-error-message {
  @apply max-w-md mx-auto;
}


/* ==========================================
 * ADDRESS FORM COMPONENT STYLES
 * ========================================== */

.sr-address-form {
  @apply space-y-6;
}

.sr-address-form-title {
  @apply text-xl font-semibold text-[var(--foreground)] mb-6;
}

/* Using space-y-3 directly in components */

/* Modern Floating Label Field Group */
.sr-field-group {
  @apply relative;
}

/* Field Group with Icon */
.sr-field-group-with-icon {
  @apply relative;
}

.sr-field-icon {
  @apply absolute start-3 pointer-events-none;
  top: 0.875rem; /* Fixed position to match input, stays stable when error messages appear */
  width: 1.125rem;
  height: 1.125rem;
  color: var(--muted-foreground);
  opacity: 0.5;
}

/* Adjust input padding when icon is present */
.sr-field-input-with-icon {
  @apply !ps-10;
}

/* Adjust label padding when icon is present */
.sr-field-group-with-icon .sr-field-label {
  @apply left-10;
}

/* Success checkmark icon (right side) */
.sr-field-success-icon {
  @apply absolute end-3 pointer-events-none;
  top: 0.875rem;
  width: 1.125rem;
  height: 1.125rem;
  color: var(--success);
  opacity: 0;
  transition: opacity 200ms;
}

.sr-field-group.sr-field-valid .sr-field-success-icon {
  opacity: 1;
}

/* Using grid classes directly in components */

.sr-field-flex-1 {
  @apply w-full;
}

/* Floating Label Styles */
.sr-field-label {
  @apply absolute start-3 transition-all duration-200 pointer-events-none;
  color: var(--muted-foreground);
}

/* Default position - centered in input */
.peer ~ .sr-field-label {
  @apply text-sm;
  top: 0.875rem;
}

/* Shrunk position - when input has placeholder shown (empty) AND not focused */
.peer:placeholder-shown:not(:focus) ~ .sr-field-label,
.peer.sr-field-select:not(.has-value):not(:focus) ~ .sr-field-label {
  @apply text-sm;
  top: 0.875rem;
}

/* Floating position - when input is focused OR has value (placeholder not shown) */
.peer:focus ~ .sr-field-label,
.peer:not(:placeholder-shown) ~ .sr-field-label,
.peer.sr-field-select:focus ~ .sr-field-label,
.peer.sr-field-select.has-value ~ .sr-field-label {
  @apply text-xs;
  top: 0.25rem;
  color: var(--muted-foreground);
}

/* Color change on focus */
.peer:focus ~ .sr-field-label {
  color: var(--primary);
}

.sr-field-required {
  @apply text-red-500;
}

/* Base theming for all form inputs - shared by sr-field-input, sr-otp-input, etc. */
@utility sr-field-base {
  background: var(--card);
  color: var(--foreground);
  box-shadow: var(--tw-shadow);
}

/* Modern Input and Select Styles - Base */
.sr-field-input,
.sr-field-select {
  @apply w-full px-3 pt-5 pb-1.5 border text-sm sr-field-base;
  border-radius: var(--radius);
  border-color: var(--border);
  min-height: 2.75rem;
  /* iOS zoom prevention via touch-action is in :host reset */
}

.sr-field-input::placeholder {
  @apply text-transparent;
}

.sr-field-input:focus,
.sr-field-select:focus {
  outline: none;
  border-color: var(--primary);
}

.sr-field-input:hover:not(:focus):not(:disabled),
.sr-field-select:hover:not(:focus):not(:disabled) {
  border-color: var(--border);
}

.sr-field-input:disabled,
.sr-field-select:disabled {
  @apply cursor-not-allowed;
  background: var(--muted);
  color: var(--muted-foreground);
  opacity: 0.5;
  border-color: var(--border);
}

.sr-field-input.sr-field-error,
.sr-field-select.sr-field-error {
  border-color: var(--destructive, #ef4444);
}

.sr-field-input.sr-field-error:focus,
.sr-field-select.sr-field-error:focus {
  border-color: var(--destructive, #ef4444);
}

/* Select dropdown arrow */
.sr-field-select {
  @apply appearance-none cursor-pointer;
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%239ca3af' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
  background-position: right 0.75rem center;
  background-repeat: no-repeat;
  background-size: 1.25em 1.25em;
  padding-right: 2.5rem;
}

/* Fix for empty select - ensure label is positioned correctly */
.sr-field-select option[value=""] {
  display: none;
}

/* When select has no value selected, treat it like placeholder-shown */
.sr-field-select:not(.has-value):not(:focus) ~ .sr-field-label {
  @apply text-sm;
  top: 0.875rem;
}

/* Error Messages */
.sr-field-error-message {
  @apply mt-1;
  @apply text-xs;
  color: var(--destructive, #ef4444);
  line-height: 1.4;
}

/* Helper Text */
.sr-field-helper-text {
  @apply mt-1.5 -mb-1;
  @apply text-xs;
  color: var(--muted-foreground);
  line-height: 1.4;
}

/* Mobile Responsive */
@media (max-width: 640px) {
  .sr-field-row {
    @apply space-x-0;
  }
  
  .sr-address-form-fields {
    @apply space-y-3;
  }
}

/* ==========================================
 * CUSTOMER FORM COMPONENT STYLES
 * ========================================== */

/* Using Tailwind classes directly in components */

.sr-customer-form-title {
  @apply text-lg font-semibold text-[var(--foreground)] mb-4;
}

.sr-form-intro-text {
  @apply text-xs mb-3;
  color: var(--muted-foreground);
  opacity: 0.7;
  line-height: 1.5;
}


/* Guest/Account Toggle */
.sr-guest-toggle {
  @apply mb-6;
}

.sr-guest-options {
  @apply flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4;
}

.sr-guest-option {
  @apply flex items-center cursor-pointer p-3 border rounded-md transition-colors duration-200;
  background: var(--card);
  border-color: var(--border);
}

.sr-guest-option:hover {
  border-color: var(--primary);
}

.sr-guest-option.sr-guest-active {
  @apply border-[var(--primary)] bg-[var(--primary)]/5;
}

.sr-guest-option input[type="radio"] {
  @apply sr-only;
}

.sr-guest-option-text {
  @apply text-sm font-medium text-[var(--foreground)] ms-2;
}

.sr-guest-option.sr-guest-active .sr-guest-option-text {
  @apply text-[var(--primary)];
}

/* Field Help Text */
.sr-field-help {
  @apply mt-0.5;
  @apply text-xs;
  color: var(--muted-foreground);
  line-height: 1.3;
}

/* Account Notice */
.sr-account-notice {
  @apply flex items-start space-x-3 p-4 rounded-md;
  background: var(--muted);
  border: 1px solid var(--border);
}

.sr-account-notice-icon {
  @apply w-5 h-5 mt-0.5 flex-shrink-0;
  color: var(--muted-foreground);
}

.sr-account-notice-text {
  @apply text-sm;
}

.sr-account-notice-text strong {
  @apply font-medium block mb-1;
  color: var(--foreground);
}

.sr-account-notice-text p {
  @apply m-0;
  color: var(--muted-foreground);
}

/* ==========================================
 * CHECKOUT FLOW STYLES
 * ========================================== */

.sr-checkout-step-header {
  @apply flex justify-between items-center pb-3 mb-3 border-b;
  border-color: var(--border);
}

.sr-checkout-step-title {
  @apply text-xl font-semibold text-[var(--foreground)] m-0;
}

.sr-checkout-progress {
  @apply text-sm;
  color: var(--muted-foreground);
}

/* Checkout Navigation */
.sr-checkout-navigation {
  @apply flex justify-between space-x-4;
}

.sr-checkout-button {
  @apply px-6 py-3 rounded-md font-medium transition-colors duration-200 flex-1;
  @apply focus:outline-none focus:ring-2 focus:ring-offset-2;
}

.sr-checkout-button-primary {
  @apply bg-[var(--primary)] text-white hover:bg-[var(--primary)]/90;
  @apply focus:ring-[var(--primary)];
}

.sr-checkout-button-secondary {
  @apply bg-[var(--border)] text-[var(--foreground)] hover:bg-[var(--secondary)];
  @apply focus:ring-[var(--primary)];
}

.sr-checkout-button:disabled {
  @apply opacity-50 cursor-not-allowed hover:bg-[var(--primary)] hover:bg-[var(--border)];
}

/* Same as Shipping Checkbox */
.sr-checkbox-label {
  @apply flex items-center cursor-pointer;
}

.sr-checkbox-label input[type="checkbox"] {
  @apply size-5 rounded border-[var(--border)]
         transition-all duration-150
         hover:border-[var(--primary)] cursor-pointer
         focus:outline-none focus:ring-0;
  background-color: var(--input, var(--card));
  accent-color: var(--primary);
}

.sr-checkbox-text {
  @apply ms-2 text-sm font-medium text-[var(--muted-foreground)]
         transition-colors duration-150 select-none;
}

/* Toggle Switch */
.sr-toggle-wrapper {
  @apply relative flex items-center gap-3 min-w-0;
}

.sr-toggle-container {
  @apply relative block rounded-full transition-colors cursor-pointer flex-shrink-0;
  background: var(--border);
  -webkit-tap-highlight-color: transparent;
}

.sr-toggle-container.sr-toggle-checked {
  background: var(--primary);
}

.sr-toggle-container.sr-toggle-disabled {
  @apply cursor-not-allowed opacity-50;
}

.sr-toggle-container.sr-toggle-error {
  @apply ring-2 ring-red-500;
}

/* Size variants */
.sr-toggle-sm {
  @apply h-6 w-10;
}

.sr-toggle-md {
  @apply h-8 w-14;
}

.sr-toggle-lg {
  @apply h-10 w-16;
}

/* Hidden checkbox input */
.sr-toggle-input {
  @apply sr-only;
}

/* Toggle track (background) */
.sr-toggle-track {
  @apply block w-full h-full relative;
}

/* Toggle thumb (sliding circle) */
.sr-toggle-thumb {
  @apply absolute inset-y-0 start-0 m-1 grid place-content-center rounded-full transition-all duration-200 ease-in-out;
  background-color: var(--card);
  color: var(--muted-foreground);
}

/* Thumb sizes */
.sr-toggle-sm .sr-toggle-thumb {
  @apply size-4;
}

.sr-toggle-md .sr-toggle-thumb {
  @apply size-6;
}

.sr-toggle-lg .sr-toggle-thumb {
  @apply size-7;
}

/* Thumb position when checked */
.sr-toggle-checked.sr-toggle-sm .sr-toggle-thumb {
  inset-inline-start: calc(100% - 24px); /* 16px thumb + 4px margin */
}

.sr-toggle-checked.sr-toggle-md .sr-toggle-thumb {
  inset-inline-start: calc(100% - 32px); /* 24px thumb + 8px margin */
}

.sr-toggle-checked.sr-toggle-lg .sr-toggle-thumb {
  inset-inline-start: calc(100% - 36px); /* 28px thumb + 8px margin */
}

/* Toggle checked state - change thumb background and icon color */
.sr-toggle-checked .sr-toggle-thumb {
  background-color: var(--primary-foreground);
  color: var(--primary);
}

/* Toggle icons */
.sr-toggle-icon {
  @apply transition-opacity duration-200;
}

.sr-toggle-icon-x {
  @apply opacity-100;
}

.sr-toggle-icon-check {
  @apply opacity-0 absolute inset-0;
}

/* When checked, swap icon visibility */
.sr-toggle-checked .sr-toggle-icon-x {
  @apply opacity-0;
}

.sr-toggle-checked .sr-toggle-icon-check {
  @apply opacity-100;
}

/* Icon sizes */
.sr-toggle-sm .sr-toggle-icon {
  @apply size-3;
}

.sr-toggle-md .sr-toggle-icon {
  @apply size-4;
}

.sr-toggle-lg .sr-toggle-icon {
  @apply size-5;
}

/* Toggle label */
.sr-toggle-label {
  @apply cursor-pointer text-sm font-medium min-w-0;
  color: var(--foreground);
}

.sr-toggle-label-disabled {
  @apply cursor-not-allowed opacity-50;
}

/* Payment Placeholder */
.sr-payment-placeholder {
  @apply text-center py-8 px-4 bg-[var(--muted)] rounded-md border-2 border-dashed border-[var(--border)];
}

.sr-payment-placeholder p {
  @apply text-[var(--muted-foreground)] m-0 mb-2;
}

.sr-payment-placeholder p:last-child {
  @apply mb-0;
}

/* Review Order Page */
.sr-review-container {
  @apply space-y-3;
}

/* Review Cards */
.sr-review-card {
  @apply rounded border;
  background: var(--card);
  border-color: var(--border, #e5e7eb);
}

.sr-review-card-header {
  @apply flex items-center justify-between px-4 py-3 border-b;
  border-color: var(--border, #f3f4f6);
}

.sr-review-card-title {
  @apply flex items-center gap-2;
}

.sr-review-card-title h4 {
  @apply text-sm font-medium m-0;
  color: var(--card-foreground);
}

.sr-review-icon {
  color: var(--foreground);
  opacity: 0.6;
  flex-shrink: 0;
}

.sr-review-edit-btn {
  @apply px-2 py-1 text-xs font-medium rounded transition-all cursor-pointer;
  background: transparent;
  color: var(--primary);
  border: 1px solid transparent;
}

.sr-review-edit-btn:hover {
  border-color: var(--primary);
}

.sr-review-card-content {
  @apply px-4 py-3;
}

/* Order Items Review */
.sr-order-items-review {
  @apply space-y-2 mb-3;
}

.sr-order-item-review {
  @apply flex justify-between items-start;
}

.sr-order-item-details {
  @apply flex gap-2;
}

.sr-order-item-image-container {
  @apply w-10 h-10 rounded relative overflow-hidden;
  background: var(--skeleton-shimmer-gradient);
  background-size: 200% 100%;
  animation: skeleton-shimmer var(--skeleton-shimmer-duration) ease-in-out infinite;
}

.sr-order-item-image {
  @apply absolute inset-0 w-full h-full object-cover opacity-0 transition-opacity duration-300;
}

.sr-order-item-image.loaded {
  @apply opacity-100;
}

/* Stop animation when image is loaded */
.sr-order-item-image-container:has(img.loaded) {
  animation: none;
  background: transparent;
}

.sr-order-item-info {
  @apply space-y-0;
}

.sr-order-item-name {
  @apply block font-medium text-xs leading-tight;
  color: var(--card-foreground);
}

.sr-order-item-variant {
  @apply block text-xs text-[var(--muted-foreground)] leading-tight;
}

.sr-order-item-quantity {
  @apply block text-xs text-[var(--muted-foreground)];
}

.sr-order-item-price {
  @apply font-medium text-xs;
  color: var(--card-foreground);
}

/* Order Totals Review */
.sr-order-totals-review {
  @apply pt-2 border-t space-y-1;
  border-color: var(--border, #f3f4f6);
}

.sr-order-total-line {
  @apply flex justify-between text-xs;
  color: var(--muted-foreground);
}

.sr-discount-line {
  color: var(--success, #15803d);
}

.sr-discount-amount {
  color: var(--success, #15803d);
}

.sr-order-total-final {
  @apply flex justify-between items-center pt-2 mt-2 border-t;
  border-color: var(--border, #f3f4f6);
}

.sr-order-total-final span:first-child {
  @apply font-medium text-sm;
  color: var(--card-foreground);
}

.sr-order-total-amount {
  @apply font-semibold text-sm;
  color: var(--primary);
}

/* Review Info Rows */
.sr-review-info-row {
  @apply flex justify-between py-1 border-b;
  border-color: var(--border, #f3f4f6);
}

.sr-review-info-row:last-child {
  @apply border-b-0;
}

.sr-review-label {
  @apply text-xs text-[var(--muted-foreground)];
}

.sr-review-value {
  @apply text-xs font-medium m-0;
  color: var(--card-foreground);
}

/* Review Address */
.sr-review-address {
  @apply space-y-0;
}

.sr-review-address p {
  @apply text-xs m-0 leading-relaxed;
  color: var(--card-foreground);
}

/* Same Address Check */
.sr-review-same-address {
  @apply flex items-center gap-2 text-xs;
  color: var(--card-foreground);
}

.sr-check-icon {
  color: var(--success, #15803d);
}

/* Payment Placeholder */
.sr-review-payment-placeholder {
  @apply text-xs text-[var(--muted-foreground)] m-0;
}

/* Test Mode Banner */
.sr-test-banner {
  @apply fixed top-0 left-1/2 -translate-x-1/2 z-[99999] transition-all duration-300;
}

.sr-test-banner-minimized {
  @apply -translate-y-full opacity-0;
}

.sr-test-banner-content {
  @apply flex items-center gap-2 px-3 py-1.5 text-xs rounded-b-lg shadow-md;
  background: var(--primary);
  color: var(--primary-foreground);
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.sr-test-banner-icon {
  @apply text-sm;
}

.sr-test-banner-text {
  @apply font-medium whitespace-nowrap;
}

.sr-test-banner-minimize {
  @apply ml-2 w-5 h-5 flex items-center justify-center rounded-full cursor-pointer transition-opacity;
  background: transparent;
  border: none;
  color: inherit;
  font-size: 18px;
  line-height: 1;
  padding: 0;
  opacity: 0.7;
}

.sr-test-banner-minimize:hover {
  opacity: 1;
}

/* Floating pill when minimized - separate from banner */
.sr-test-banner-pill {
  @apply fixed top-2 left-1/2 -translate-x-1/2 z-[99999];
  @apply px-3 py-1.5 text-xs font-medium rounded-full shadow-md cursor-pointer;
  background: var(--primary);
  color: var(--primary-foreground);
  @apply hover:shadow transition-shadow;
}

/* Security Notice */
.sr-review-security {
  @apply flex items-center gap-2 px-3 py-2 rounded bg-blue-50 text-blue-700 text-xs;
}

.sr-security-icon {
  @apply flex-shrink-0;
  color: currentColor;
}

/* Keep old styles for backward compatibility */
.sr-order-summary {
  @apply bg-[var(--muted)] rounded-md p-4 mb-6;
}

.sr-order-summary h4 {
  @apply text-lg font-semibold text-[var(--foreground)] mb-4 m-0;
}

.sr-order-items {
  @apply space-y-3 mb-4;
}

.sr-order-item {
  @apply flex justify-between items-center text-sm;
}

.sr-checkout-summary {
  @apply space-y-4;
}

.sr-summary-section {
  @apply space-y-2;
}

.sr-summary-section h5 {
  @apply text-sm font-semibold text-[var(--foreground)] mb-2 m-0;
}

.sr-summary-section p {
  @apply text-sm text-[var(--muted-foreground)] m-0;
}

.sr-summary-address {
  @apply space-y-1;
}

.sr-summary-address p {
  @apply text-sm text-[var(--muted-foreground)] m-0;
}

/* Authentication Section Styles */
.sr-auth-section {
  @apply mt-4 space-y-4;
}

.sr-auth-notice {
  @apply flex items-start gap-3 p-4 rounded-lg;
  background: var(--muted);
  border: 1px solid var(--border);
}

.sr-auth-icon {
  @apply w-6 h-6 flex-shrink-0;
  color: var(--muted-foreground);
}

.sr-auth-content {
  @apply space-y-1;
}

.sr-auth-title {
  @apply font-medium text-base;
  color: var(--muted-foreground);
}

.sr-auth-subtitle {
  @apply text-sm;
  color: var(--muted-foreground);
  opacity: 0.7;
}

.sr-auth-divider {
  @apply relative text-center my-4;
}

.sr-auth-divider::before {
  content: '';
  @apply absolute inset-0 top-1/2 h-[1px];
  background: var(--border, #e5e7eb);
}

.sr-auth-divider span {
  @apply relative px-2 text-xs uppercase;
  background: var(--card, #ffffff);
  color: var(--muted-foreground);
}

/* Removed duplicate - using definition at line 821 */

.sr-btn-text {
  @apply text-sm underline transition-colors;
  color: var(--muted-foreground);
}

.sr-btn-text:hover {
  color: var(--primary, #3B82F6);
}

.sr-btn-icon {
  @apply w-4 h-4;
}

/* Spinner styles consolidated at line 1612 */


.sr-success-icon {
  @apply w-5 h-5 flex-shrink-0;
  color: #10b981;
}

.sr-returning-notice {
  @apply flex items-start gap-3 p-3 mb-4;
  border-radius: var(--radius);
  background: var(--muted);
  border: 1px solid var(--border);
}

.sr-notice-icon {
  @apply w-5 h-5 flex-shrink-0 mt-0.5;
  color: var(--muted-foreground);
}

.sr-notice-text {
  @apply space-y-1 flex-1;
}

.sr-notice-text p {
  @apply font-medium m-0;
  color: var(--muted-foreground);
}

.sr-notice-subtitle {
  @apply text-sm font-normal;
  color: var(--muted-foreground);
  opacity: 0.7;
}

/* Authentication/Notice link button - used in checkout auth flow */
.sr-auth-link {
  @apply inline-flex items-center justify-center gap-2 text-sm font-medium underline cursor-pointer transition-opacity disabled:opacity-50 disabled:cursor-not-allowed;
  color: var(--muted-foreground);
  background: none;
  border: none;
  padding: 0.5rem 0;
}

.sr-auth-link:hover:not(:disabled) {
  opacity: 0.7;
}

.sr-auth-link .sr-spinner {
  @apply w-4 h-4;
}

/* OTP Input Styles */
.sr-otp-section {
  @apply space-y-4 mt-4 text-center;
}

.sr-otp-header {
  @apply space-y-2;
}

.sr-otp-title {
  @apply text-lg font-semibold text-[var(--foreground)] m-0;
}

.sr-otp-subtitle {
  @apply text-sm text-[var(--muted-foreground)] m-0;
}

.sr-otp-inputs {
  @apply flex justify-center gap-2;
}

.sr-otp-input {
  @apply w-12 h-14 text-center text-xl font-semibold rounded-lg border-2
         border-[var(--border)] focus:border-[var(--primary)] focus:outline-none
         transition-colors sr-field-base;
  -webkit-appearance: none;
  -moz-appearance: textfield;
}

.sr-otp-input::-webkit-inner-spin-button,
.sr-otp-input::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

.sr-otp-verifying {
  @apply text-sm text-[var(--muted-foreground)] flex items-center justify-center gap-2;
}

.sr-otp-resend {
  @apply text-center mt-4;
}

.sr-otp-resend p {
  @apply text-sm text-[var(--muted-foreground)] m-0;
}
.sr-otp-guest-option {
  @apply text-center mt-6 pt-4 border-t border-[var(--border)];
}

.sr-notice-text p {
  @apply text-sm;
  color: var(--foreground, #1f2937);
}

.sr-notice-subtitle {
  @apply text-xs;
  color: var(--muted-foreground);
}

/* Checking customer state */
.sr-checking-customer {
  @apply flex items-center gap-2 mt-3 text-sm;
  color: var(--muted-foreground);
}

/* Helper text for secondary information */
.sr-helper-text {
  @apply text-xs text-center mt-2;
  color: var(--muted-foreground);
}

.sr-checking-text {
  @apply animate-pulse;
}

/* ===== Order Result Screens ===== */

/* Order Success */
.sr-order-success {
  @apply text-center;
}

.sr-success-icon {
  @apply w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6;
  background: color-mix(in srgb, var(--success, #15803d) 10%, transparent);
}

.sr-success-icon svg {
  @apply w-10 h-10;
  color: var(--success, #15803d);
}

.sr-success-title {
  @apply text-2xl font-semibold mb-2 m-0;
  color: var(--card-foreground);
}

.sr-success-subtitle {
  @apply mb-6 m-0;
  color: var(--muted-foreground);
}

.sr-email-notice {
  @apply rounded-lg p-4 mb-6;
  background: var(--muted);
}

.sr-email-label {
  @apply text-sm mb-2 m-0;
  color: var(--card-foreground);
}

.sr-email-address {
  @apply text-sm font-medium m-0;
  color: var(--card-foreground);
}

.sr-order-details {
  @apply text-left rounded-lg p-4 mb-6;
  border: 1px solid var(--border, #e5e7eb);
}

.sr-order-details-title {
  @apply text-sm font-semibold mb-3 m-0;
  color: var(--card-foreground);
}

.sr-order-number-row {
  @apply flex justify-between py-2 mb-2;
  border-bottom: 1px solid var(--border, #f3f4f6);
}

.sr-order-number-value {
  @apply text-sm font-mono font-medium;
  color: var(--card-foreground);
}

.sr-order-row {
  @apply flex justify-between py-2;
  border-bottom: 1px solid var(--border, #f3f4f6);
}

.sr-order-label {
  @apply text-xs;
  color: var(--muted-foreground);
}

.sr-order-value {
  @apply text-xs;
  color: var(--card-foreground);
}

.sr-order-items-section {
  @apply py-3;
  border-bottom: 1px solid var(--border, #f3f4f6);
}

.sr-items-header {
  @apply text-xs mb-2;
  color: var(--muted-foreground);
}

.sr-order-line-item {
  @apply flex gap-3 mb-3;
}

.sr-item-image {
  @apply w-12 h-12 object-cover rounded border;
  border-color: var(--border, #e5e7eb);
}

.sr-item-image-placeholder {
  @apply w-12 h-12 rounded flex items-center justify-center;
  background: var(--card, #f3f4f6);
}

.sr-item-image-placeholder svg {
  @apply w-6 h-6;
  color: var(--muted-foreground, #9ca3af);
}

.sr-item-info {
  @apply flex-1 min-w-0;
}

.sr-item-name {
  @apply text-xs font-medium mb-0.5;
  color: var(--card-foreground);
}

.sr-item-variant {
  @apply text-[10px];
  color: var(--muted-foreground);
}

.sr-item-qty {
  @apply text-[10px];
  color: var(--muted-foreground);
}

.sr-item-price {
  @apply text-xs font-medium whitespace-nowrap;
  color: var(--card-foreground);
}

.sr-discount-value {
  @apply text-xs;
  color: var(--success, #15803d);
}

.sr-order-total-row {
  @apply flex justify-between pt-3;
}

.sr-total-label {
  @apply text-sm font-semibold;
  color: var(--card-foreground);
}

.sr-total-value {
  @apply text-sm font-semibold;
  color: var(--primary);
}

.sr-continue-btn {
  @apply w-full max-w-[200px];
}

/* Payment Pending */
.sr-payment-pending {
  @apply text-center p-12 px-4 min-h-[400px] flex flex-col items-center justify-center;
}

.sr-pending-icon {
  @apply w-16 h-16 mx-auto mb-6;
  color: var(--warning, #f59e0b);
}

.sr-pending-title {
  @apply text-2xl font-semibold mb-2 m-0;
  color: var(--card-foreground);
}

.sr-pending-message {
  @apply mb-6 m-0 max-w-md;
  color: var(--muted-foreground);
}

.sr-pending-hint {
  @apply mb-8 m-0 max-w-md text-sm;
  color: var(--muted-foreground);
}

.sr-pending-actions {
  @apply flex gap-4 flex-wrap justify-center;
}

/* Order Failure */
.sr-order-failure {
  @apply text-center p-12 px-4;
}

.sr-failure-icon {
  @apply w-16 h-16 mx-auto mb-6;
  color: var(--destructive, #ef4444);
}

.sr-failure-title {
  @apply text-2xl font-semibold mb-2 m-0;
  color: var(--card-foreground);
}

.sr-failure-message {
  @apply mb-6 m-0 max-w-md;
  color: var(--muted-foreground);
}

.sr-failure-actions {
  @apply flex gap-4 flex-wrap justify-center;
}

/* Order Not Found */
.sr-order-not-found {
  @apply text-center p-12 px-4;
}

.sr-not-found-icon {
  @apply w-16 h-16 mx-auto mb-6;
  color: var(--warning, #f59e0b);
}

.sr-not-found-title {
  @apply text-2xl font-semibold mb-2 m-0;
  color: var(--card-foreground);
}

.sr-not-found-message {
  @apply mb-6 m-0 max-w-md;
  color: var(--muted-foreground);
}

.sr-not-found-actions {
  @apply flex gap-4 flex-wrap justify-center;
}

/* ==========================================
   Buy Button Styles
   ========================================== */

.sr-buy-button {
  width: auto;
}

/* ==========================================
   Product Modal Styles
   ========================================== */

shoprocket-product-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
}

.sr-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--overlay);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 99999;
  overflow-y: auto;
  padding: 1rem;
  animation: sr-modal-fadeIn 0.2s ease-out;
}

.sr-modal-content {
  position: relative;
  background: var(--sr-modal-background, var(--card, white));
  border-radius: var(--sr-modal-border-radius, var(--radius));
  max-width: min(90vw, 1200px);
  width: 100%;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: var(--tw-shadow);
  animation: sr-modal-slideUp 0.3s ease-out;
  z-index: 1;
}

.sr-modal-close {
  position: absolute;
  top: 16px;
  right: 16px;
  width: 32px;
  height: 32px;
  border: none;
  background: var(--sr-modal-close-background, rgba(0, 0, 0, 0.1));
  color: var(--sr-modal-close-color, var(--card-foreground, #333));
  border-radius: var(--radius);
  cursor: pointer;
  font-size: 20px;
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2;
  transition: background 0.2s;
}

.sr-modal-close:hover {
  background: var(--sr-modal-close-hover-background, rgba(0, 0, 0, 0.2));
}

shoprocket-product-modal.closing .sr-modal-overlay {
  animation: sr-modal-fadeOut 0.2s ease-in;
}

shoprocket-product-modal.closing .sr-modal-content {
  animation: sr-modal-slideDown 0.2s ease-in;
}

/* Buy button modal closing animations */
.sr-modal-overlay.closing {
  animation: sr-modal-fadeOut 0.2s ease-in;
}

.sr-modal-content.closing {
  animation: sr-modal-slideDown 0.2s ease-in;
}

/* Fade out overlay when transitioning to cart */
.sr-modal-overlay.transitioning {
  animation: sr-modal-fadeOut 0.25s ease forwards;
}

@keyframes sr-modal-fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes sr-modal-fadeOut {
  from { opacity: 1; }
  to { opacity: 0; }
}

@keyframes sr-modal-slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes sr-modal-slideDown {
  from {
    opacity: 1;
    transform: translateY(0);
  }
  to {
    opacity: 0;
    transform: translateY(20px);
  }
}

/* Mobile responsive */
@media (max-width: 768px) {
  .sr-modal-overlay {
    padding: 0;
  }

  .sr-modal-content {
    width: 100dvw;
    height: 100dvh;
    max-width: 100dvw;
    max-height: 100dvh;
    border-radius: 0;
  }
}

/* =========================================
   CATEGORIES WIDGET
   ========================================= */

.sr-categories-widget {
  @apply w-full;
}

/* Category Header */
.sr-category-header {
  @apply mb-6;
}

.sr-category-title {
  @apply text-2xl font-bold;
  color: var(--foreground);
}

/* Back Button */
.sr-category-back {
  @apply inline-flex items-center gap-2 mb-4 px-0 py-2 bg-transparent border-0 cursor-pointer font-medium text-sm;
  color: var(--primary);
  transition: opacity 0.2s;
}

.sr-category-back:hover {
  opacity: 0.8;
}

/* Category Grid */
.sr-category-grid {
  @apply grid gap-6;
  grid-template-columns: repeat(var(--sr-category-cols-sm, 2), 1fr);
}

/* Category Card */
.sr-category-card {
  @apply rounded border p-4 cursor-pointer;
  background: var(--card);
  border-color: var(--border);
  border-radius: var(--sr-radius, 8px);
  transition: transform 0.2s, box-shadow 0.2s;
}

.sr-category-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--tw-shadow);
}

.sr-category-image {
  @apply w-full mb-3 rounded;
  aspect-ratio: 1;
  object-fit: cover;
  border-radius: var(--sr-radius, 8px);
}

.sr-category-name {
  @apply font-semibold mb-2;
  font-size: var(--sr-category-title-size, 1.125rem);
  color: var(--foreground);
}

.sr-category-description {
  @apply text-sm mb-2;
  color: var(--muted-foreground);
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  line-clamp: 2;
}

.sr-category-count {
  @apply text-xs;
  color: var(--muted-foreground);
}

/* Loading Skeleton */
.sr-category-skeleton {
  @apply rounded border;
  background: var(--card);
  border-color: var(--border);
  border-radius: var(--sr-radius, 8px);
  height: 300px;
  animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

/* Empty State */
.sr-category-products {
  @apply text-center py-8;
}

/* Responsive - mobile-first with CSS variables */
@media (min-width: 768px) {
  .sr-category-grid {
    grid-template-columns: repeat(var(--sr-category-cols-md, 3), 1fr);
  }
}

@media (min-width: 1024px) {
  .sr-category-grid {
    grid-template-columns: repeat(var(--sr-category-cols, 3), 1fr);
  }
}
