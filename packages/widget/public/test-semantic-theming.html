<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Semantic Classes Theming Test</title>
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f5f5f5;
    }
    
    .demo-section {
      max-width: 1200px;
      margin: 0 auto 40px;
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    h1, h2 {
      margin-top: 0;
    }
    
    h2 {
      border-bottom: 2px solid #e5e7eb;
      padding-bottom: 10px;
      margin-bottom: 20px;
    }
    
    .theme-controls {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
      padding: 20px;
      background: #f9fafb;
      border-radius: 6px;
    }
    
    .control-group {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }
    
    .control-group label {
      font-size: 14px;
      font-weight: 500;
      color: #374151;
    }
    
    .control-group input {
      padding: 8px;
      border: 1px solid #d1d5db;
      border-radius: 4px;
      font-size: 14px;
    }
    
    .control-group input[type="color"] {
      height: 40px;
      cursor: pointer;
    }
    
    .preset-themes {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }
    
    .preset-btn {
      padding: 10px 20px;
      border: 2px solid #e5e7eb;
      background: white;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.2s;
    }
    
    .preset-btn:hover {
      border-color: #3b82f6;
      background: #eff6ff;
    }
    
    .preset-btn.active {
      background: #3b82f6;
      color: white;
      border-color: #3b82f6;
    }
    
    .code-preview {
      background: #1f2937;
      color: #e5e7eb;
      padding: 20px;
      border-radius: 6px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      overflow-x: auto;
      margin-top: 20px;
    }
    
    .widget-container {
      min-height: 400px;
      padding: 20px;
      background: #fafafa;
      border-radius: 8px;
      border: 2px dashed #e5e7eb;
    }
  </style>
</head>
<body>
  <div class="demo-section">
    <h1>ðŸŽ¨ ShopRocket Widget - Semantic Classes Theming Test</h1>
    <p>This demo shows how the new semantic class approach provides clean HTML and flexible theming through CSS variables.</p>
  </div>

  <div class="demo-section">
    <h2>Theme Presets</h2>
    <div class="preset-themes">
      <button class="preset-btn active" onclick="applyTheme('default', event)">Default</button>
      <button class="preset-btn" onclick="applyTheme('dark', event)">Dark Mode</button>
      <button class="preset-btn" onclick="applyTheme('brand', event)">Brand Colors</button>
      <button class="preset-btn" onclick="applyTheme('minimal', event)">Minimal</button>
      <button class="preset-btn" onclick="applyTheme('bold', event)">Bold & Colorful</button>
    </div>
    
    <h3>Custom Theme Controls</h3>
    <div class="theme-controls">
      <!-- Theme-level variables -->
      <div class="control-group">
        <label>Primary Color (--color-primary)</label>
        <input type="color" id="color-primary" value="#111827" onchange="updateTheme()">
      </div>
      
      <div class="control-group">
        <label>Surface Color (--color-surface)</label>
        <input type="color" id="color-surface" value="#ffffff" onchange="updateTheme()">
      </div>
      
      <div class="control-group">
        <label>Text Color (--color-text)</label>
        <input type="color" id="color-text" value="#111827" onchange="updateTheme()">
      </div>
      
      <!-- Component-specific overrides -->
      <div class="control-group">
        <label>Card Background (--sr-card-bg)</label>
        <input type="color" id="sr-card-bg" value="#ffffff" onchange="updateTheme()">
      </div>
      
      <div class="control-group">
        <label>Button Background (--sr-button-primary-bg)</label>
        <input type="color" id="sr-button-primary-bg" value="#111827" onchange="updateTheme()">
      </div>
      
      <div class="control-group">
        <label>Card Padding (--sr-card-padding)</label>
        <input type="text" id="sr-card-padding" value="1rem" placeholder="e.g., 1rem, 20px" onchange="updateTheme()">
      </div>
      
      <div class="control-group">
        <label>Card Shadow (--sr-card-shadow)</label>
        <input type="text" id="sr-card-shadow" value="0 4px 6px -1px rgba(0, 0, 0, 0.1)" placeholder="CSS shadow value" onchange="updateTheme()">
      </div>
      
      <div class="control-group">
        <label>Card Radius (--sr-card-radius)</label>
        <input type="text" id="sr-card-radius" value="8px" placeholder="e.g., 8px, 1rem" onchange="updateTheme()">
      </div>
    </div>
  </div>

  <div class="demo-section">
    <h2>Widget Preview</h2>
    <div class="widget-container">
      <div id="widget"
           data-shoprocket="catalog" 
           data-limit="4">
      </div>
    </div>
    
    <div class="code-preview" id="css-output">
      /* Current theme CSS */
      shoprocket-product-catalog {
        --color-primary: #111827;
        --color-surface: #ffffff;
        --color-text: #111827;
      }
    </div>
  </div>

  <div class="demo-section">
    <h2>Key Benefits of This Approach</h2>
    <ul>
      <li><strong>Clean HTML:</strong> No utility soup - just semantic classes like <code>sr-product-card</code></li>
      <li><strong>Three-Level Customization:</strong>
        <ol>
          <li>Theme variables (e.g., <code>--color-primary</code>) affect multiple components</li>
          <li>Component variables (e.g., <code>--sr-card-bg</code>) for granular control</li>
          <li>Direct CSS overrides for ultimate flexibility</li>
        </ol>
      </li>
      <li><strong>Small Bundle:</strong> Styles defined once in CSS, not repeated inline</li>
      <li><strong>Shadow DOM Compatible:</strong> CSS variables pierce the shadow boundary</li>
      <li><strong>Maintainable:</strong> All styles in one place, using Tailwind's @apply</li>
    </ul>
  </div>

  <!-- Load the widget -->
  <script src="shoprocket.js?pk=pk_hAWEyUyNBfhvO62wCxMRY"></script>
  
  <script>
    const themes = {
      default: {
        '--color-primary': '#111827',
        '--color-surface': '#ffffff',
        '--color-text': '#111827',
        '--color-hover': '#f3f4f6',
        '--sr-card-shadow': '0 4px 6px -1px rgba(0, 0, 0, 0.1)',
        '--sr-card-radius': '8px',
        '--sr-card-padding': '1rem'
      },
      dark: {
        '--color-primary': '#818cf8',
        '--color-surface': '#1f2937',
        '--color-text': '#e5e7eb',
        '--color-hover': '#374151',
        '--color-on-primary': '#1f2937',
        '--sr-card-bg': '#111827',
        '--sr-card-shadow': '0 4px 6px -1px rgba(0, 0, 0, 0.5)',
        '--sr-card-text': '#e5e7eb',
        '--sr-product-title-color': '#f3f4f6',
        '--sr-product-price-color': '#818cf8'
      },
      brand: {
        '--color-primary': '#dc2626',
        '--color-surface': '#fef2f2',
        '--color-text': '#7f1d1d',
        '--sr-button-primary-bg': '#dc2626',
        '--sr-button-primary-text': '#ffffff',
        '--sr-card-radius': '12px'
      },
      minimal: {
        '--color-primary': '#000000',
        '--color-surface': '#ffffff',
        '--color-text': '#000000',
        '--sr-card-shadow': 'none',
        '--sr-card-radius': '0',
        '--sr-card-padding': '0.75rem',
        '--sr-button-radius': '0'
      },
      bold: {
        '--color-primary': '#7c3aed',
        '--color-surface': '#faf5ff',
        '--color-text': '#4c1d95',
        '--sr-card-bg': 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
        '--sr-card-text': '#ffffff',
        '--sr-card-shadow': '0 10px 30px -5px rgba(124, 58, 237, 0.3)',
        '--sr-card-radius': '20px',
        '--sr-product-title-color': '#ffffff',
        '--sr-product-price-color': '#fbbf24',
        '--sr-button-primary-bg': '#fbbf24',
        '--sr-button-primary-text': '#4c1d95'
      }
    };
    
    function applyTheme(themeName, evt) {
      // Look for the shoprocket-product-catalog element
      const widgetElement = document.querySelector('shoprocket-product-catalog');
      
      if (!widgetElement) {
        console.log('Widget not loaded yet, waiting...');
        setTimeout(() => applyTheme(themeName, evt), 500);
        return;
      }
      
      const theme = themes[themeName];
      
      // Apply theme to the widget element
      Object.entries(theme).forEach(([key, value]) => {
        widgetElement.style.setProperty(key, value);
      });
      
      // Update active button
      document.querySelectorAll('.preset-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      if (evt && evt.target) {
        evt.target.classList.add('active');
      }
      
      // Update controls to reflect theme
      Object.entries(theme).forEach(([key, value]) => {
        const input = document.getElementById(key.replace('--', ''));
        if (input) {
          input.value = value;
        }
      });
      
      updateCodePreview();
    }
    
    function updateTheme() {
      const widgetElement = document.querySelector('shoprocket-product-catalog');
      
      if (!widgetElement) {
        console.log('Widget not loaded yet');
        return;
      }
      
      const controls = [
        'color-primary',
        'color-surface',
        'color-text',
        'sr-card-bg',
        'sr-button-primary-bg',
        'sr-card-padding',
        'sr-card-shadow',
        'sr-card-radius'
      ];
      
      controls.forEach(id => {
        const input = document.getElementById(id);
        if (input && input.value) {
          widgetElement.style.setProperty('--' + id, input.value);
        }
      });
      
      updateCodePreview();
    }
    
    function updateCodePreview() {
      const widgetElement = document.querySelector('shoprocket-product-catalog');
      
      if (!widgetElement) return;
      
      const styles = widgetElement.getAttribute('style') || '';
      const cssVars = styles.split(';')
        .filter(s => s.includes('--'))
        .map(s => '  ' + s.trim())
        .join(';\n');
      
      document.getElementById('css-output').textContent = 
`/* Apply this CSS to customize your widget */
shoprocket-product-catalog {
${cssVars};
}`;
    }
  </script>
</body>
</html>